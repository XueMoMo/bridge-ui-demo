import{A as e,F as t,O as n,S as r,g as i,k as a,p as o,t as s,y as c}from"./ConstantsUtil-kg0Pe4aS.js";const l={METMASK_CONNECTOR_NAME:`MetaMask`,TRUST_CONNECTOR_NAME:`Trust Wallet`,SOLFLARE_CONNECTOR_NAME:`Solflare`,PHANTOM_CONNECTOR_NAME:`Phantom`,COIN98_CONNECTOR_NAME:`Coin98`,MAGIC_EDEN_CONNECTOR_NAME:`Magic Eden`,BACKPACK_CONNECTOR_NAME:`Backpack`,BITGET_CONNECTOR_NAME:`Bitget Wallet`,FRONTIER_CONNECTOR_NAME:`Frontier`,XVERSE_CONNECTOR_NAME:`Xverse Wallet`,LEATHER_CONNECTOR_NAME:`Leather`,EIP155:`eip155`,ADD_CHAIN_METHOD:`wallet_addEthereumChain`,EIP6963_ANNOUNCE_EVENT:`eip6963:announceProvider`,EIP6963_REQUEST_EVENT:`eip6963:requestProvider`,CONNECTOR_RDNS_MAP:{coinbaseWallet:`com.coinbase.wallet`,coinbaseWalletSDK:`com.coinbase.wallet`},CONNECTOR_TYPE_EXTERNAL:`EXTERNAL`,CONNECTOR_TYPE_WALLET_CONNECT:`WALLET_CONNECT`,CONNECTOR_TYPE_INJECTED:`INJECTED`,CONNECTOR_TYPE_ANNOUNCED:`ANNOUNCED`,CONNECTOR_TYPE_AUTH:`AUTH`,CONNECTOR_TYPE_MULTI_CHAIN:`MULTI_CHAIN`,CONNECTOR_TYPE_W3M_AUTH:`ID_AUTH`},u={getCaipTokens(e){if(!e)return;let t={};return Object.entries(e).forEach(([e,n])=>{t[`${l.EIP155}:${e}`]=n}),t},isLowerCaseMatch(e,t){return e?.toLowerCase()===t?.toLowerCase()}},d={filterOutDuplicatesByRDNS(t){let r=n.state.enableEIP6963?c.state.connectors:[],i=e.getRecentWallets(),o=r.map(e=>e.info?.rdns).filter(Boolean),s=i.map(e=>e.rdns).filter(Boolean),l=o.concat(s);if(l.includes(`io.metamask.mobile`)&&a.isMobile()){let e=l.indexOf(`io.metamask.mobile`);l[e]=`io.metamask`}return t.filter(e=>!l.includes(String(e?.rdns)))},filterOutDuplicatesByIds(t){let n=c.state.connectors.filter(e=>e.type===`ANNOUNCED`||e.type===`INJECTED`),r=e.getRecentWallets(),i=n.map(e=>e.explorerId),a=r.map(e=>e.id),o=i.concat(a);return t.filter(e=>!o.includes(e?.id))},filterOutDuplicateWallets(e){let t=this.filterOutDuplicatesByRDNS(e);return this.filterOutDuplicatesByIds(t)},markWalletsAsInstalled(e){let{connectors:t}=c.state,{featuredWalletIds:r}=n.state,i=t.filter(e=>e.type===`ANNOUNCED`).reduce((e,t)=>(t.info?.rdns&&(e[t.info.rdns]=!0),e),{});return e.map(e=>({...e,installed:!!e.rdns&&!!i[e.rdns??``]})).sort((e,t)=>{let n=Number(t.installed)-Number(e.installed);if(n!==0)return n;if(r?.length){let n=r.indexOf(e.id),i=r.indexOf(t.id);if(n!==-1&&i!==-1)return n-i;if(n!==-1)return-1;if(i!==-1)return 1}return 0})},getConnectOrderMethod(e,t){let i=e?.connectMethodsOrder||n.state.features?.connectMethodsOrder,a=t||c.state.connectors;if(i)return i;let{injected:o,announced:l}=f.getConnectorsByType(a,r.state.recommended,r.state.featured),u=o.filter(f.showConnector),d=l.filter(f.showConnector);return u.length||d.length?[`wallet`,`email`,`social`]:s.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(e){let t=!!e.rdns&&r.state.excludedWallets.some(t=>t.rdns===e.rdns),n=!!e.name&&r.state.excludedWallets.some(t=>u.isLowerCaseMatch(t.name,e.name));return t||n}},f={getConnectorsByType(t,r,i){let{customWallets:a}=n.state,o=e.getRecentWallets(),s=d.filterOutDuplicateWallets(r),c=d.filterOutDuplicateWallets(i),l=t.filter(e=>e.type===`MULTI_CHAIN`),u=t.filter(e=>e.type===`ANNOUNCED`),f=t.filter(e=>e.type===`INJECTED`);return{custom:a,recent:o,external:t.filter(e=>e.type===`EXTERNAL`),multiChain:l,announced:u,injected:f,recommended:s,featured:c}},showConnector(e){let t=e.info?.rdns,n=!!t&&r.state.excludedWallets.some(e=>!!e.rdns&&e.rdns===t),o=!!e.name&&r.state.excludedWallets.some(t=>u.isLowerCaseMatch(t.name,e.name));return!(e.type===`INJECTED`&&(e.name===`Browser Wallet`&&(!a.isMobile()||a.isMobile()&&!t&&!i.checkInstalled())||n||o)||(e.type===`ANNOUNCED`||e.type===`EXTERNAL`)&&(n||o))},getIsConnectedWithWC(){return Array.from(o.state.chains.values()).some(e=>c.getConnectorId(e.namespace)===t.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:e,featured:t,custom:r,recent:i,announced:a,injected:o,multiChain:s,external:c,overriddenConnectors:l=n.state.features?.connectorTypeOrder??[]}){let u=f.getIsConnectedWithWC(),d=[{type:`walletConnect`,isEnabled:n.state.enableWalletConnect&&!u},{type:`recent`,isEnabled:i.length>0},{type:`injected`,isEnabled:[...o,...a,...s].length>0},{type:`featured`,isEnabled:t.length>0},{type:`custom`,isEnabled:r&&r.length>0},{type:`external`,isEnabled:c.length>0},{type:`recommended`,isEnabled:e.length>0}].filter(e=>e.isEnabled),p=new Set(d.map(e=>e.type)),m=l.filter(e=>p.has(e)).map(e=>({type:e,isEnabled:!0})),h=d.filter(({type:e})=>!m.some(({type:t})=>t===e));return Array.from(new Set([...m,...h].map(({type:e})=>e)))}};export{l as i,d as n,u as r,f as t};