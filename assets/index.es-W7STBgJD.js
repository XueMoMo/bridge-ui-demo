import{$t as e,Qt as t,Zt as n,nn as r}from"./index-CALDYd03.js";import{t as i}from"./events-DUP6avRZ.js";import{S as a,c as o,h as s,l as c,r as l,u,x as d}from"./index.es-IprXNGK4.js";var f=e({__assign:()=>se,__asyncDelegator:()=>ee,__asyncGenerator:()=>D,__asyncValues:()=>te,__await:()=>E,__awaiter:()=>v,__classPrivateFieldGet:()=>ae,__classPrivateFieldSet:()=>oe,__createBinding:()=>b,__decorate:()=>h,__exportStar:()=>x,__extends:()=>p,__generator:()=>y,__importDefault:()=>ie,__importStar:()=>re,__makeTemplateObject:()=>ne,__metadata:()=>_,__param:()=>g,__read:()=>C,__rest:()=>m,__spread:()=>w,__spreadArrays:()=>T,__values:()=>S});function p(e,t){O(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function m(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function h(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function g(e,t){return function(n,r){t(n,r,e)}}function _(e,t){if(typeof Reflect==`object`&&typeof Reflect.metadata==`function`)return Reflect.metadata(e,t)}function v(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})}function y(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(r)throw TypeError(`Generator is already executing.`);for(;n;)try{if(r=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){n.label=o[1];break}if(o[0]===6&&n.label<a[1]){n.label=a[1],a=o;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(o);break}a[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e],i=0}finally{r=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function b(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}function x(e,t){for(var n in e)n!==`default`&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function S(e){var t=typeof Symbol==`function`&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==`number`)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?`Object is not iterable.`:`Symbol.iterator is not defined.`)}function C(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function w(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(C(arguments[t]));return e}function T(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function E(e){return this instanceof E?(this.v=e,this):new E(e)}function D(e,t,n){if(!Symbol.asyncIterator)throw TypeError(`Symbol.asyncIterator is not defined.`);var r=n.apply(e,t||[]),i,a=[];return i={},o(`next`),o(`throw`),o(`return`),i[Symbol.asyncIterator]=function(){return this},i;function o(e){r[e]&&(i[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||s(e,t)})})}function s(e,t){try{c(r[e](t))}catch(e){d(a[0][3],e)}}function c(e){e.value instanceof E?Promise.resolve(e.value.v).then(l,u):d(a[0][2],e)}function l(e){s(`next`,e)}function u(e){s(`throw`,e)}function d(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}}function ee(e){var t,n;return t={},r(`next`),r(`throw`,function(e){throw e}),r(`return`),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:E(e[r](t)),done:r===`return`}:i?i(t):t}:i}}function te(e){if(!Symbol.asyncIterator)throw TypeError(`Symbol.asyncIterator is not defined.`);var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof S==`function`?S(e):e[Symbol.iterator](),n={},r(`next`),r(`throw`),r(`return`),n[Symbol.asyncIterator]=function(){return this},n);function r(t){n[t]=e[t]&&function(n){return new Promise(function(r,a){n=e[t](n),i(r,a,n.done,n.value)})}}function i(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}}function ne(e,t){return Object.defineProperty?Object.defineProperty(e,`raw`,{value:t}):e.raw=t,e}function re(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function ie(e){return e&&e.__esModule?e:{default:e}}function ae(e,t){if(!t.has(e))throw TypeError(`attempted to get private field on non-instance`);return t.get(e)}function oe(e,t,n){if(!t.has(e))throw TypeError(`attempted to set private field on non-instance`);return t.set(e,n),n}var O,se,ce=t((()=>{O=function(e,t){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},O(e,t)},se=function(){return se=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},se.apply(this,arguments)}})),le=n((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.delay=void 0;function t(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}e.delay=t})),ue=n((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ONE_THOUSAND=e.ONE_HUNDRED=void 0,e.ONE_HUNDRED=100,e.ONE_THOUSAND=1e3})),de=n((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365})),fe=n((e=>{Object.defineProperty(e,`__esModule`,{value:!0});var t=(ce(),r(f));t.__exportStar(ue(),e),t.__exportStar(de(),e)})),pe=n((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.fromMiliseconds=e.toMiliseconds=void 0;var t=fe();function n(e){return e*t.ONE_THOUSAND}e.toMiliseconds=n;function r(e){return Math.floor(e/t.ONE_THOUSAND)}e.fromMiliseconds=r})),me=n((e=>{Object.defineProperty(e,`__esModule`,{value:!0});var t=(ce(),r(f));t.__exportStar(le(),e),t.__exportStar(pe(),e)})),he=n((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.Watch=void 0;var t=class{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){let t=this.get(e);if(t.elapsed!==void 0)throw Error(`Watch already stopped for label: ${e}`);let n=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:n})}get(e){let t=this.timestamps.get(e);if(t===void 0)throw Error(`No timestamp found for label: ${e}`);return t}elapsed(e){let t=this.get(e);return t.elapsed||Date.now()-t.started}};e.Watch=t,e.default=t})),ge=n((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.IWatch=void 0,e.IWatch=class{}})),_e=n((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),(ce(),r(f)).__exportStar(ge(),e)})),ve=n((e=>{Object.defineProperty(e,`__esModule`,{value:!0});var t=(ce(),r(f));t.__exportStar(me(),e),t.__exportStar(he(),e),t.__exportStar(_e(),e),t.__exportStar(fe(),e)})),ye=class{},be=i(),xe=ve(),Se=class extends ye{constructor(e){super()}},Ce=xe.FIVE_SECONDS,we={pulse:`heartbeat_pulse`},Te=class e extends Se{constructor(e){super(e),this.events=new be.EventEmitter,this.interval=Ce,this.interval=e?.interval||Ce}static async init(t){let n=new e(t);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),(0,xe.toMiliseconds)(this.interval))}pulse(){this.events.emit(we.pulse)}},Ee=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,De=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Oe=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function ke(e,t){if(e===`__proto__`||e===`constructor`&&t&&typeof t==`object`&&`prototype`in t){Ae(e);return}return t}function Ae(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function je(e,t={}){if(typeof e!=`string`)return e;if(e[0]===`"`&&e[e.length-1]===`"`&&e.indexOf(`\\`)===-1)return e.slice(1,-1);let n=e.trim();if(n.length<=9)switch(n.toLowerCase()){case`true`:return!0;case`false`:return!1;case`undefined`:return;case`null`:return null;case`nan`:return NaN;case`infinity`:return 1/0;case`-infinity`:return-1/0}if(!Oe.test(e)){if(t.strict)throw SyntaxError(`[destr] Invalid JSON`);return e}try{if(Ee.test(e)||De.test(e)){if(t.strict)throw Error(`[destr] Possible prototype pollution`);return JSON.parse(e,ke)}return JSON.parse(e)}catch(n){if(t.strict)throw n;return e}}function Me(e){return!e||typeof e.then!=`function`?Promise.resolve(e):e}function k(e,...t){try{return Me(e(...t))}catch(e){return Promise.reject(e)}}function Ne(e){let t=typeof e;return e===null||t!==`object`&&t!==`function`}function Pe(e){let t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}function Fe(e){if(Ne(e))return String(e);if(Pe(e)||Array.isArray(e))return JSON.stringify(e);if(typeof e.toJSON==`function`)return Fe(e.toJSON());throw Error(`[unstorage] Cannot stringify value!`)}var Ie=`base64:`;function Le(e){return typeof e==`string`?e:Ie+Be(e)}function Re(e){return typeof e!=`string`||!e.startsWith(Ie)?e:ze(e.slice(7))}function ze(e){return globalThis.Buffer?Buffer.from(e,`base64`):Uint8Array.from(globalThis.atob(e),e=>e.codePointAt(0))}function Be(e){return globalThis.Buffer?Buffer.from(e).toString(`base64`):globalThis.btoa(String.fromCodePoint(...e))}function A(e){return e&&e.split(`?`)[0]?.replace(/[/\\]/g,`:`).replace(/:+/g,`:`).replace(/^:|:$/g,``)||``}function Ve(...e){return A(e.join(`:`))}function He(e){return e=A(e),e?e+`:`:``}function Ue(e,t){if(t===void 0)return!0;let n=0,r=e.indexOf(`:`);for(;r>-1;)n++,r=e.indexOf(`:`,r+1);return n<=t}function We(e,t){return t?e.startsWith(t)&&e[e.length-1]!==`$`:e[e.length-1]!==`$`}function Ge(e){return e}var Ke=`memory`,qe=Ge(()=>{let e=new Map;return{name:Ke,getInstance:()=>e,hasItem(t){return e.has(t)},getItem(t){return e.get(t)??null},getItemRaw(t){return e.get(t)??null},setItem(t,n){e.set(t,n)},setItemRaw(t,n){e.set(t,n)},removeItem(t){e.delete(t)},getKeys(){return[...e.keys()]},clear(){e.clear()},dispose(){e.clear()}}});function Je(e={}){let t={mounts:{"":e.driver||qe()},mountpoints:[``],watching:!1,watchListeners:[],unwatch:{}},n=e=>{for(let n of t.mountpoints)if(e.startsWith(n))return{base:n,relativeKey:e.slice(n.length),driver:t.mounts[n]};return{base:``,relativeKey:e,driver:t.mounts[``]}},r=(e,n)=>t.mountpoints.filter(t=>t.startsWith(e)||n&&e.startsWith(t)).map(n=>({relativeBase:e.length>n.length?e.slice(n.length):void 0,mountpoint:n,driver:t.mounts[n]})),i=(e,n)=>{if(t.watching){n=A(n);for(let r of t.watchListeners)r(e,n)}},a=async()=>{if(!t.watching)for(let e in t.watching=!0,t.mounts)t.unwatch[e]=await Ye(t.mounts[e],i,e)},o=async()=>{if(t.watching){for(let e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},s=(e,t,r)=>{let i=new Map,a=e=>{let t=i.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},i.set(e.base,t)),t};for(let r of e){let e=typeof r==`string`,i=A(e?r:r.key),o=e?void 0:r.value,s=e||!r.options?t:{...t,...r.options},c=n(i);a(c).items.push({key:i,value:o,relativeKey:c.relativeKey,options:s})}return Promise.all([...i.values()].map(e=>r(e))).then(e=>e.flat())},c={hasItem(e,t={}){e=A(e);let{relativeKey:r,driver:i}=n(e);return k(i.hasItem,r,t)},getItem(e,t={}){e=A(e);let{relativeKey:r,driver:i}=n(e);return k(i.getItem,r,t).then(e=>je(e))},getItems(e,t={}){return s(e,t,e=>e.driver.getItems?k(e.driver.getItems,e.items.map(e=>({key:e.relativeKey,options:e.options})),t).then(t=>t.map(t=>({key:Ve(e.base,t.key),value:je(t.value)}))):Promise.all(e.items.map(t=>k(e.driver.getItem,t.relativeKey,t.options).then(e=>({key:t.key,value:je(e)})))))},getItemRaw(e,t={}){e=A(e);let{relativeKey:r,driver:i}=n(e);return i.getItemRaw?k(i.getItemRaw,r,t):k(i.getItem,r,t).then(e=>Re(e))},async setItem(e,t,r={}){if(t===void 0)return c.removeItem(e);e=A(e);let{relativeKey:a,driver:o}=n(e);o.setItem&&(await k(o.setItem,a,Fe(t),r),o.watch||i(`update`,e))},async setItems(e,t){await s(e,t,async e=>{if(e.driver.setItems)return k(e.driver.setItems,e.items.map(e=>({key:e.relativeKey,value:Fe(e.value),options:e.options})),t);e.driver.setItem&&await Promise.all(e.items.map(t=>k(e.driver.setItem,t.relativeKey,Fe(t.value),t.options)))})},async setItemRaw(e,t,r={}){if(t===void 0)return c.removeItem(e,r);e=A(e);let{relativeKey:a,driver:o}=n(e);if(o.setItemRaw)await k(o.setItemRaw,a,t,r);else if(o.setItem)await k(o.setItem,a,Le(t),r);else return;o.watch||i(`update`,e)},async removeItem(e,t={}){typeof t==`boolean`&&(t={removeMeta:t}),e=A(e);let{relativeKey:r,driver:a}=n(e);a.removeItem&&(await k(a.removeItem,r,t),(t.removeMeta||t.removeMata)&&await k(a.removeItem,r+`$`,t),a.watch||i(`remove`,e))},async getMeta(e,t={}){typeof t==`boolean`&&(t={nativeOnly:t}),e=A(e);let{relativeKey:r,driver:i}=n(e),a=Object.create(null);if(i.getMeta&&Object.assign(a,await k(i.getMeta,r,t)),!t.nativeOnly){let e=await k(i.getItem,r+`$`,t).then(e=>je(e));e&&typeof e==`object`&&(typeof e.atime==`string`&&(e.atime=new Date(e.atime)),typeof e.mtime==`string`&&(e.mtime=new Date(e.mtime)),Object.assign(a,e))}return a},setMeta(e,t,n={}){return this.setItem(e+`$`,t,n)},removeMeta(e,t={}){return this.removeItem(e+`$`,t)},async getKeys(e,t={}){e=He(e);let n=r(e,!0),i=[],a=[],o=!0;for(let e of n){e.driver.flags?.maxDepth||(o=!1);let n=await k(e.driver.getKeys,e.relativeBase,t);for(let t of n){let n=e.mountpoint+A(t);i.some(e=>n.startsWith(e))||a.push(n)}i=[e.mountpoint,...i.filter(t=>!t.startsWith(e.mountpoint))]}let s=t.maxDepth!==void 0&&!o;return a.filter(n=>(!s||Ue(n,t.maxDepth))&&We(n,e))},async clear(e,t={}){e=He(e),await Promise.all(r(e,!1).map(async e=>{if(e.driver.clear)return k(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){let n=await e.driver.getKeys(e.relativeBase||``,t);return Promise.all(n.map(n=>e.driver.removeItem(n,t)))}}))},async dispose(){await Promise.all(Object.values(t.mounts).map(e=>Xe(e)))},async watch(e){return await a(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter(t=>t!==e),t.watchListeners.length===0&&await o()}},async unwatch(){t.watchListeners=[],await o()},mount(e,n){if(e=He(e),e&&t.mounts[e])throw Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort((e,t)=>t.length-e.length)),t.mounts[e]=n,t.watching&&Promise.resolve(Ye(n,i,e)).then(n=>{t.unwatch[e]=n}).catch(console.error),c},async unmount(e,n=!0){e=He(e),!(!e||!t.mounts[e])&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),n&&await Xe(t.mounts[e]),t.mountpoints=t.mountpoints.filter(t=>t!==e),delete t.mounts[e])},getMount(e=``){e=A(e)+`:`;let t=n(e);return{driver:t.driver,base:t.base}},getMounts(e=``,t={}){return e=A(e),r(e,t.parents).map(e=>({driver:e.driver,base:e.mountpoint}))},keys:(e,t={})=>c.getKeys(e,t),get:(e,t={})=>c.getItem(e,t),set:(e,t,n={})=>c.setItem(e,t,n),has:(e,t={})=>c.hasItem(e,t),del:(e,t={})=>c.removeItem(e,t),remove:(e,t={})=>c.removeItem(e,t)};return c}function Ye(e,t,n){return e.watch?e.watch((e,r)=>t(e,n+r)):()=>{}}async function Xe(e){typeof e.dispose==`function`&&await k(e.dispose)}function j(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function Ze(e,t){let n,r=()=>{if(n)return n;let r=indexedDB.open(e);return r.onupgradeneeded=()=>r.result.createObjectStore(t),n=j(r),n.then(e=>{e.onclose=()=>n=void 0},()=>{}),n};return(e,n)=>r().then(r=>n(r.transaction(t,e).objectStore(t)))}var Qe;function M(){return Qe||=Ze(`keyval-store`,`keyval`),Qe}function $e(e,t=M()){return t(`readonly`,t=>j(t.get(e)))}function et(e,t,n=M()){return n(`readwrite`,n=>(n.put(t,e),j(n.transaction)))}function tt(e,t=M()){return t(`readwrite`,t=>(t.delete(e),j(t.transaction)))}function nt(e=M()){return e(`readwrite`,e=>(e.clear(),j(e.transaction)))}function rt(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},j(e.transaction)}function it(e=M()){return e(`readonly`,e=>{if(e.getAllKeys)return j(e.getAllKeys());let t=[];return rt(e,e=>t.push(e.key)).then(()=>t)})}var at=`idb-keyval`,ot=(e={})=>{let t=e.base&&e.base.length>0?`${e.base}:`:``,n=e=>t+e,r;return e.dbName&&e.storeName&&(r=Ze(e.dbName,e.storeName)),{name:at,options:e,async hasItem(e){return!(typeof await $e(n(e),r)>`u`)},async getItem(e){return await $e(n(e),r)??null},setItem(e,t){return et(n(e),t,r)},removeItem(e){return tt(n(e),r)},getKeys(){return it(r)},clear(){return nt(r)}}},st=`WALLET_CONNECT_V2_INDEXED_DB`,ct=`keyvaluestorage`,lt=class{constructor(){this.indexedDb=Je({driver:ot({dbName:st,storeName:ct})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){let t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,a(t))}async removeItem(e){await this.indexedDb.removeItem(e)}},ut=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},dt={exports:{}};(function(){let e;function t(){}e=t,e.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.setItem=function(e,t){this[e]=String(t)},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){let e=this;Object.keys(e).forEach(function(t){e[t]=void 0,delete e[t]})},e.prototype.key=function(e){return e||=0,Object.keys(this)[e]},e.prototype.__defineGetter__(`length`,function(){return Object.keys(this).length}),typeof ut<`u`&&ut.localStorage?dt.exports=ut.localStorage:typeof window<`u`&&window.localStorage?dt.exports=window.localStorage:dt.exports=new t})();function ft(e){return[e[0],d(e[1]??``)]}var pt=class{constructor(){this.localStorage=dt.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(ft)}async getItem(e){let t=this.localStorage.getItem(e);if(t!==null)return d(t)}async setItem(e,t){this.localStorage.setItem(e,a(t))}async removeItem(e){this.localStorage.removeItem(e)}},mt=`wc_storage_version`,ht=1,gt=async(e,t,n)=>{let r=mt,i=await t.getItem(r);if(i&&i>=ht){n(t);return}let a=await e.getKeys();if(!a.length){n(t);return}let o=[];for(;a.length;){let n=a.shift();if(!n)continue;let r=n.toLowerCase();if(r.includes(`wc@`)||r.includes(`walletconnect`)||r.includes(`wc_`)||r.includes(`wallet_connect`)){let r=await e.getItem(n);await t.setItem(n,r),o.push(n)}}await t.setItem(r,ht),n(t),_t(e,o)},_t=async(e,t)=>{t.length&&t.forEach(async t=>{await e.removeItem(t)})},vt=class{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};let e=new pt;this.storage=e;try{gt(e,new lt,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{let t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}},yt=ve();function bt(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name===`Uint8Array`}function xt(e,...t){if(!bt(e))throw Error(`Uint8Array expected`);if(t.length>0&&!t.includes(e.length))throw Error(`Uint8Array expected of length `+t+`, got length=`+e.length)}function St(e,t=!0){if(e.destroyed)throw Error(`Hash instance has been destroyed`);if(t&&e.finished)throw Error(`Hash#digest() has already been called`)}function Ct(e,t){xt(e);let n=t.outputLen;if(e.length<n)throw Error(`digestInto() expects output buffer of length at least `+n)}var N=typeof globalThis==`object`&&`crypto`in globalThis?globalThis.crypto:void 0,wt=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function Tt(e){if(typeof e!=`string`)throw Error(`utf8ToBytes expected string, got `+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function Et(e){return typeof e==`string`&&(e=Tt(e)),xt(e),e}var Dt=class{clone(){return this._cloneInto()}};function Ot(e){let t=t=>e().update(Et(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function kt(e=32){if(N&&typeof N.getRandomValues==`function`)return N.getRandomValues(new Uint8Array(e));if(N&&typeof N.randomBytes==`function`)return N.randomBytes(e);throw Error(`crypto.getRandomValues must be defined`)}function At(e,t,n,r){if(typeof e.setBigUint64==`function`)return e.setBigUint64(t,n,r);let i=BigInt(32),a=BigInt(4294967295),o=Number(n>>i&a),s=Number(n&a),c=r?4:0,l=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+l,s,r)}var jt=class extends Dt{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=wt(this.buffer)}update(e){St(this);let{view:t,buffer:n,blockLen:r}=this;e=Et(e);let i=e.length;for(let a=0;a<i;){let o=Math.min(r-this.pos,i-a);if(o===r){let t=wt(e);for(;r<=i-a;a+=r)this.process(t,a);continue}n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===r&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){St(this),Ct(e,this),this.finished=!0;let{buffer:t,view:n,blockLen:r,isLE:i}=this,{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>r-a&&(this.process(n,0),a=0);for(let e=a;e<r;e++)t[e]=0;At(n,r-8,BigInt(this.length*8),i),this.process(n,0);let o=wt(e),s=this.outputLen;if(s%4)throw Error(`_sha2: outputLen should be aligned to 32bit`);let c=s/4,l=this.get();if(c>l.length)throw Error(`_sha2: outputLen bigger than state`);for(let e=0;e<c;e++)o.setUint32(4*e,l[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||=new this.constructor,e.set(...this.get());let{blockLen:t,buffer:n,length:r,finished:i,destroyed:a,pos:o}=this;return e.length=r,e.pos=o,e.finished=i,e.destroyed=a,r%t&&e.buffer.set(n),e}},Mt=BigInt(2**32-1),Nt=BigInt(32);function Pt(e,t=!1){return t?{h:Number(e&Mt),l:Number(e>>Nt&Mt)}:{h:Number(e>>Nt&Mt)|0,l:Number(e&Mt)|0}}function Ft(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:a,l:o}=Pt(e[i],t);[n[i],r[i]]=[a,o]}return[n,r]}var It=(e,t)=>BigInt(e>>>0)<<Nt|BigInt(t>>>0),Lt=(e,t,n)=>e>>>n,Rt=(e,t,n)=>e<<32-n|t>>>n,zt=(e,t,n)=>e>>>n|t<<32-n,Bt=(e,t,n)=>e<<32-n|t>>>n,Vt=(e,t,n)=>e<<64-n|t>>>n-32,Ht=(e,t,n)=>e>>>n-32|t<<64-n,Ut=(e,t)=>t,Wt=(e,t)=>e,Gt=(e,t,n)=>e<<n|t>>>32-n,Kt=(e,t,n)=>t<<n|e>>>32-n,qt=(e,t,n)=>t<<n-32|e>>>64-n,Jt=(e,t,n)=>e<<n-32|t>>>64-n;function Yt(e,t,n,r){let i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}var P={fromBig:Pt,split:Ft,toBig:It,shrSH:Lt,shrSL:Rt,rotrSH:zt,rotrSL:Bt,rotrBH:Vt,rotrBL:Ht,rotr32H:Ut,rotr32L:Wt,rotlSH:Gt,rotlSL:Kt,rotlBH:qt,rotlBL:Jt,add:Yt,add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,add5H:(e,t,n,r,i,a)=>t+n+r+i+a+(e/2**32|0)|0,add5L:(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0)},[Xt,Zt]=(()=>P.split(`0x428a2f98d728ae22.0x7137449123ef65cd.0xb5c0fbcfec4d3b2f.0xe9b5dba58189dbbc.0x3956c25bf348b538.0x59f111f1b605d019.0x923f82a4af194f9b.0xab1c5ed5da6d8118.0xd807aa98a3030242.0x12835b0145706fbe.0x243185be4ee4b28c.0x550c7dc3d5ffb4e2.0x72be5d74f27b896f.0x80deb1fe3b1696b1.0x9bdc06a725c71235.0xc19bf174cf692694.0xe49b69c19ef14ad2.0xefbe4786384f25e3.0x0fc19dc68b8cd5b5.0x240ca1cc77ac9c65.0x2de92c6f592b0275.0x4a7484aa6ea6e483.0x5cb0a9dcbd41fbd4.0x76f988da831153b5.0x983e5152ee66dfab.0xa831c66d2db43210.0xb00327c898fb213f.0xbf597fc7beef0ee4.0xc6e00bf33da88fc2.0xd5a79147930aa725.0x06ca6351e003826f.0x142929670a0e6e70.0x27b70a8546d22ffc.0x2e1b21385c26c926.0x4d2c6dfc5ac42aed.0x53380d139d95b3df.0x650a73548baf63de.0x766a0abb3c77b2a8.0x81c2c92e47edaee6.0x92722c851482353b.0xa2bfe8a14cf10364.0xa81a664bbc423001.0xc24b8b70d0f89791.0xc76c51a30654be30.0xd192e819d6ef5218.0xd69906245565a910.0xf40e35855771202a.0x106aa07032bbd1b8.0x19a4c116b8d2d0c8.0x1e376c085141ab53.0x2748774cdf8eeb99.0x34b0bcb5e19b48a8.0x391c0cb3c5c95a63.0x4ed8aa4ae3418acb.0x5b9cca4f7763e373.0x682e6ff3d6b2b8a3.0x748f82ee5defb2fc.0x78a5636f43172f60.0x84c87814a1f0ab72.0x8cc702081a6439ec.0x90befffa23631e28.0xa4506cebde82bde9.0xbef9a3f7b2c67915.0xc67178f2e372532b.0xca273eceea26619c.0xd186b8c721c0c207.0xeada7dd6cde0eb1e.0xf57d4f7fee6ed178.0x06f067aa72176fba.0x0a637dc5a2c898a6.0x113f9804bef90dae.0x1b710b35131c471b.0x28db77f523047d84.0x32caab7b40c72493.0x3c9ebe0a15c9bebc.0x431d67c49c100d4c.0x4cc5d4becb3e42b6.0x597f299cfc657e2a.0x5fcb6fab3ad6faec.0x6c44198c4a475817`.split(`.`).map(e=>BigInt(e))))(),F=new Uint32Array(80),I=new Uint32Array(80),Qt=class extends jt{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:n,Bl:r,Ch:i,Cl:a,Dh:o,Dl:s,Eh:c,El:l,Fh:u,Fl:d,Gh:f,Gl:p,Hh:m,Hl:h}=this;return[e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h]}set(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=r|0,this.Ch=i|0,this.Cl=a|0,this.Dh=o|0,this.Dl=s|0,this.Eh=c|0,this.El=l|0,this.Fh=u|0,this.Fl=d|0,this.Gh=f|0,this.Gl=p|0,this.Hh=m|0,this.Hl=h|0}process(e,t){for(let n=0;n<16;n++,t+=4)F[n]=e.getUint32(t),I[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=F[e-15]|0,n=I[e-15]|0,r=P.rotrSH(t,n,1)^P.rotrSH(t,n,8)^P.shrSH(t,n,7),i=P.rotrSL(t,n,1)^P.rotrSL(t,n,8)^P.shrSL(t,n,7),a=F[e-2]|0,o=I[e-2]|0,s=P.rotrSH(a,o,19)^P.rotrBH(a,o,61)^P.shrSH(a,o,6),c=P.rotrSL(a,o,19)^P.rotrBL(a,o,61)^P.shrSL(a,o,6),l=P.add4L(i,c,I[e-7],I[e-16]);F[e]=P.add4H(l,r,s,F[e-7],F[e-16])|0,I[e]=l|0}let{Ah:n,Al:r,Bh:i,Bl:a,Ch:o,Cl:s,Dh:c,Dl:l,Eh:u,El:d,Fh:f,Fl:p,Gh:m,Gl:h,Hh:g,Hl:_}=this;for(let e=0;e<80;e++){let t=P.rotrSH(u,d,14)^P.rotrSH(u,d,18)^P.rotrBH(u,d,41),v=P.rotrSL(u,d,14)^P.rotrSL(u,d,18)^P.rotrBL(u,d,41),y=u&f^~u&m,b=d&p^~d&h,x=P.add5L(_,v,b,Zt[e],I[e]),S=P.add5H(x,g,t,y,Xt[e],F[e]),C=x|0,w=P.rotrSH(n,r,28)^P.rotrBH(n,r,34)^P.rotrBH(n,r,39),T=P.rotrSL(n,r,28)^P.rotrBL(n,r,34)^P.rotrBL(n,r,39),E=n&i^n&o^i&o,D=r&a^r&s^a&s;g=m|0,_=h|0,m=f|0,h=p|0,f=u|0,p=d|0,{h:u,l:d}=P.add(c|0,l|0,S|0,C|0),c=o|0,l=s|0,o=i|0,s=a|0,i=n|0,a=r|0;let ee=P.add3L(C,T,D);n=P.add3H(ee,S,w,E),r=ee|0}({h:n,l:r}=P.add(this.Ah|0,this.Al|0,n|0,r|0)),{h:i,l:a}=P.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:o,l:s}=P.add(this.Ch|0,this.Cl|0,o|0,s|0),{h:c,l}=P.add(this.Dh|0,this.Dl|0,c|0,l|0),{h:u,l:d}=P.add(this.Eh|0,this.El|0,u|0,d|0),{h:f,l:p}=P.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:m,l:h}=P.add(this.Gh|0,this.Gl|0,m|0,h|0),{h:g,l:_}=P.add(this.Hh|0,this.Hl|0,g|0,_|0),this.set(n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_)}roundClean(){F.fill(0),I.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},$t=Ot(()=>new Qt),en=BigInt(0),tn=BigInt(1),nn=BigInt(2);function rn(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name===`Uint8Array`}function an(e){if(!rn(e))throw Error(`Uint8Array expected`)}function on(e,t){if(typeof t!=`boolean`)throw Error(e+` boolean expected, got `+t)}var sn=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,`0`));function cn(e){an(e);let t=``;for(let n=0;n<e.length;n++)t+=sn[e[n]];return t}function ln(e){if(typeof e!=`string`)throw Error(`hex string expected, got `+typeof e);return e===``?en:BigInt(`0x`+e)}var L={_0:48,_9:57,A:65,F:70,a:97,f:102};function un(e){if(e>=L._0&&e<=L._9)return e-L._0;if(e>=L.A&&e<=L.F)return e-(L.A-10);if(e>=L.a&&e<=L.f)return e-(L.a-10)}function dn(e){if(typeof e!=`string`)throw Error(`hex string expected, got `+typeof e);let t=e.length,n=t/2;if(t%2)throw Error(`hex string expected, got unpadded hex of length `+t);let r=new Uint8Array(n);for(let t=0,i=0;t<n;t++,i+=2){let n=un(e.charCodeAt(i)),a=un(e.charCodeAt(i+1));if(n===void 0||a===void 0){let t=e[i]+e[i+1];throw Error(`hex string expected, got non-hex character "`+t+`" at index `+i)}r[t]=n*16+a}return r}function fn(e){return ln(cn(e))}function pn(e){return an(e),ln(cn(Uint8Array.from(e).reverse()))}function mn(e,t){return dn(e.toString(16).padStart(t*2,`0`))}function hn(e,t){return mn(e,t).reverse()}function R(e,t,n){let r;if(typeof t==`string`)try{r=dn(t)}catch(t){throw Error(e+` must be hex string or Uint8Array, cause: `+t)}else if(rn(t))r=Uint8Array.from(t);else throw Error(e+` must be hex string or Uint8Array`);let i=r.length;if(typeof n==`number`&&i!==n)throw Error(e+` of length `+n+` expected, got `+i);return r}function gn(...e){let t=0;for(let n=0;n<e.length;n++){let r=e[n];an(r),t+=r.length}let n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){let i=e[t];n.set(i,r),r+=i.length}return n}var _n=e=>typeof e==`bigint`&&en<=e;function vn(e,t,n){return _n(e)&&_n(t)&&_n(n)&&t<=e&&e<n}function z(e,t,n,r){if(!vn(t,n,r))throw Error(`expected valid `+e+`: `+n+` <= n < `+r+`, got `+t)}function yn(e){let t;for(t=0;e>en;e>>=tn,t+=1);return t}var bn=e=>(nn<<BigInt(e-1))-tn,xn={bigint:e=>typeof e==`bigint`,function:e=>typeof e==`function`,boolean:e=>typeof e==`boolean`,string:e=>typeof e==`string`,stringOrUint8Array:e=>typeof e==`string`||rn(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e==`function`&&Number.isSafeInteger(e.outputLen)};function Sn(e,t,n={}){let r=(t,n,r)=>{let i=xn[n];if(typeof i!=`function`)throw Error(`invalid validator function`);let a=e[t];if(!(r&&a===void 0)&&!i(a,e))throw Error(`param `+String(t)+` is invalid. Expected `+n+`, got `+a)};for(let[e,n]of Object.entries(t))r(e,n,!1);for(let[e,t]of Object.entries(n))r(e,t,!0);return e}function Cn(e){let t=new WeakMap;return(n,...r)=>{let i=t.get(n);if(i!==void 0)return i;let a=e(n,...r);return t.set(n,a),a}}var B=BigInt(0),V=BigInt(1),H=BigInt(2),wn=BigInt(3),Tn=BigInt(4),En=BigInt(5),Dn=BigInt(8);function U(e,t){let n=e%t;return n>=B?n:t+n}function On(e,t,n){if(t<B)throw Error(`invalid exponent, negatives unsupported`);if(n<=B)throw Error(`invalid modulus`);if(n===V)return B;let r=V;for(;t>B;)t&V&&(r=r*e%n),e=e*e%n,t>>=V;return r}function W(e,t,n){let r=e;for(;t-- >B;)r*=r,r%=n;return r}function kn(e,t){if(e===B)throw Error(`invert: expected non-zero number`);if(t<=B)throw Error(`invert: expected positive modulus, got `+t);let n=U(e,t),r=t,i=B,a=V;for(;n!==B;){let e=r/n,t=r%n,o=i-a*e;r=n,n=t,i=a,a=o}if(r!==V)throw Error(`invert: does not exist`);return U(i,t)}function An(e){let t=(e-V)/H,n,r,i;for(n=e-V,r=0;n%H===B;n/=H,r++);for(i=H;i<e&&On(i,t,e)!==e-V;i++)if(i>1e3)throw Error(`Cannot find square root: likely non-prime P`);if(r===1){let t=(e+V)/Tn;return function(e,n){let r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw Error(`Cannot find square root`);return r}}let a=(n+V)/H;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw Error(`Cannot find square root`);let s=r,c=e.pow(e.mul(e.ONE,i),n),l=e.pow(o,a),u=e.pow(o,n);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(u);t<s&&!e.eql(n,e.ONE);t++)n=e.sqr(n);let n=e.pow(c,V<<BigInt(s-t-1));c=e.sqr(n),l=e.mul(l,n),u=e.mul(u,c),s=t}return l}}function jn(e){if(e%Tn===wn){let t=(e+V)/Tn;return function(e,n){let r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw Error(`Cannot find square root`);return r}}if(e%Dn===En){let t=(e-En)/Dn;return function(e,n){let r=e.mul(n,H),i=e.pow(r,t),a=e.mul(n,i),o=e.mul(e.mul(a,H),i),s=e.mul(a,e.sub(o,e.ONE));if(!e.eql(e.sqr(s),n))throw Error(`Cannot find square root`);return s}}return An(e)}var Mn=(e,t)=>(U(e,t)&V)===V,Nn=[`create`,`isValid`,`is0`,`neg`,`inv`,`sqrt`,`sqr`,`eql`,`add`,`sub`,`mul`,`pow`,`div`,`addN`,`subN`,`mulN`,`sqrN`];function Pn(e){return Sn(e,Nn.reduce((e,t)=>(e[t]=`function`,e),{ORDER:`bigint`,MASK:`bigint`,BYTES:`isSafeInteger`,BITS:`isSafeInteger`}))}function Fn(e,t,n){if(n<B)throw Error(`invalid exponent, negatives unsupported`);if(n===B)return e.ONE;if(n===V)return t;let r=e.ONE,i=t;for(;n>B;)n&V&&(r=e.mul(r,i)),i=e.sqr(i),n>>=V;return r}function In(e,t){let n=Array(t.length),r=t.reduce((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r)),e.ONE),i=e.inv(r);return t.reduceRight((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r)),i),n}function Ln(e,t){let n=t===void 0?e.toString(2).length:t;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Rn(e,t,n=!1,r={}){if(e<=B)throw Error(`invalid field: expected ORDER > 0, got `+e);let{nBitLength:i,nByteLength:a}=Ln(e,t);if(a>2048)throw Error(`invalid field: expected ORDER of <= 2048 bytes`);let o,s=Object.freeze({ORDER:e,isLE:n,BITS:i,BYTES:a,MASK:bn(i),ZERO:B,ONE:V,create:t=>U(t,e),isValid:t=>{if(typeof t!=`bigint`)throw Error(`invalid field element: expected bigint, got `+typeof t);return B<=t&&t<e},is0:e=>e===B,isOdd:e=>(e&V)===V,neg:t=>U(-t,e),eql:(e,t)=>e===t,sqr:t=>U(t*t,e),add:(t,n)=>U(t+n,e),sub:(t,n)=>U(t-n,e),mul:(t,n)=>U(t*n,e),pow:(e,t)=>Fn(s,e,t),div:(t,n)=>U(t*kn(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>kn(t,e),sqrt:r.sqrt||(t=>(o||=jn(e),o(s,t))),invertBatch:e=>In(s,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?hn(e,a):mn(e,a),fromBytes:e=>{if(e.length!==a)throw Error(`Field.fromBytes: expected `+a+` bytes, got `+e.length);return n?pn(e):fn(e)}});return Object.freeze(s)}var zn=BigInt(0),G=BigInt(1);function Bn(e,t){let n=t.negate();return e?n:t}function Vn(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error(`invalid window size, expected [1..`+t+`], got W=`+e)}function Hn(e,t){return Vn(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}function Un(e,t){if(!Array.isArray(e))throw Error(`array expected`);e.forEach((e,n)=>{if(!(e instanceof t))throw Error(`invalid point at index `+n)})}function Wn(e,t){if(!Array.isArray(e))throw Error(`array of scalars expected`);e.forEach((e,n)=>{if(!t.isValid(e))throw Error(`invalid scalar at index `+n)})}var Gn=new WeakMap,Kn=new WeakMap;function qn(e){return Kn.get(e)||1}function Jn(e,t){return{constTimeNegate:Bn,hasPrecomputes(e){return qn(e)!==1},unsafeLadder(t,n,r=e.ZERO){let i=t;for(;n>zn;)n&G&&(r=r.add(i)),i=i.double(),n>>=G;return r},precomputeWindow(e,n){let{windows:r,windowSize:i}=Hn(n,t),a=[],o=e,s=o;for(let e=0;e<r;e++){s=o,a.push(s);for(let e=1;e<i;e++)s=s.add(o),a.push(s);o=s.double()}return a},wNAF(n,r,i){let{windows:a,windowSize:o}=Hn(n,t),s=e.ZERO,c=e.BASE,l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let e=0;e<a;e++){let t=e*o,n=Number(i&l);i>>=d,n>o&&(n-=u,i+=G);let a=t,f=t+Math.abs(n)-1,p=e%2!=0,m=n<0;n===0?c=c.add(Bn(p,r[a])):s=s.add(Bn(m,r[f]))}return{p:s,f:c}},wNAFUnsafe(n,r,i,a=e.ZERO){let{windows:o,windowSize:s}=Hn(n,t),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let e=0;e<o;e++){let t=e*s;if(i===zn)break;let n=Number(i&c);if(i>>=u,n>s&&(n-=l,i+=G),n===0)continue;let o=r[t+Math.abs(n)-1];n<0&&(o=o.negate()),a=a.add(o)}return a},getPrecomputes(e,t,n){let r=Gn.get(t);return r||(r=this.precomputeWindow(t,e),e!==1&&Gn.set(t,n(r))),r},wNAFCached(e,t,n){let r=qn(e);return this.wNAF(r,this.getPrecomputes(r,e,n),t)},wNAFCachedUnsafe(e,t,n,r){let i=qn(e);return i===1?this.unsafeLadder(e,t,r):this.wNAFUnsafe(i,this.getPrecomputes(i,e,n),t,r)},setWindowSize(e,n){Vn(n,t),Kn.set(e,n),Gn.delete(e)}}}function Yn(e,t,n,r){if(Un(n,e),Wn(r,t),n.length!==r.length)throw Error(`arrays of points and scalars must have equal length`);let i=e.ZERO,a=yn(BigInt(n.length)),o=a>12?a-3:a>4?a-2:a?2:1,s=(1<<o)-1,c=Array(s+1).fill(i),l=Math.floor((t.BITS-1)/o)*o,u=i;for(let e=l;e>=0;e-=o){c.fill(i);for(let t=0;t<r.length;t++){let i=r[t],a=Number(i>>BigInt(e)&BigInt(s));c[a]=c[a].add(n[t])}let t=i;for(let e=c.length-1,n=i;e>0;e--)n=n.add(c[e]),t=t.add(n);if(u=u.add(t),e!==0)for(let e=0;e<o;e++)u=u.double()}return u}function Xn(e){return Pn(e.Fp),Sn(e,{n:`bigint`,h:`bigint`,Gx:`field`,Gy:`field`},{nBitLength:`isSafeInteger`,nByteLength:`isSafeInteger`}),Object.freeze({...Ln(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}var K=BigInt(0),q=BigInt(1),Zn=BigInt(2),Qn=BigInt(8),$n={zip215:!0};function er(e){let t=Xn(e);return Sn(e,{hash:`function`,a:`bigint`,d:`bigint`,randomBytes:`function`},{adjustScalarBytes:`function`,domain:`function`,uvRatio:`function`,mapToCurve:`function`}),Object.freeze({...t})}function tr(e){let t=er(e),{Fp:n,n:r,prehash:i,hash:a,randomBytes:o,nByteLength:s,h:c}=t,l=Zn<<BigInt(s*8)-q,u=n.create,d=Rn(t.n,t.nBitLength),f=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:n.sqrt(e*n.inv(t))}}catch{return{isValid:!1,value:K}}}),p=t.adjustScalarBytes||(e=>e),m=t.domain||((e,t,n)=>{if(on(`phflag`,n),t.length||n)throw Error(`Contexts/pre-hash are not supported`);return e});function h(e,t){z(`coordinate `+e,t,K,l)}function g(e){if(!(e instanceof y))throw Error(`ExtendedPoint expected`)}let _=Cn((e,t)=>{let{ex:r,ey:i,ez:a}=e,o=e.is0();t??=o?Qn:n.inv(a);let s=u(r*t),c=u(i*t),l=u(a*t);if(o)return{x:K,y:q};if(l!==q)throw Error(`invZ was invalid`);return{x:s,y:c}}),v=Cn(e=>{let{a:n,d:r}=t;if(e.is0())throw Error(`bad point: ZERO`);let{ex:i,ey:a,ez:o,et:s}=e,c=u(i*i),l=u(a*a),d=u(o*o),f=u(d*d);if(u(d*u(u(c*n)+l))!==u(f+u(r*u(c*l))))throw Error(`bad point: equation left != right (1)`);if(u(i*a)!==u(o*s))throw Error(`bad point: equation left != right (2)`);return!0});class y{constructor(e,t,n,r){this.ex=e,this.ey=t,this.ez=n,this.et=r,h(`x`,e),h(`y`,t),h(`z`,n),h(`t`,r),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof y)throw Error(`extended point not allowed`);let{x:t,y:n}=e||{};return h(`x`,t),h(`y`,n),new y(t,n,q,u(t*n))}static normalizeZ(e){let t=n.invertBatch(e.map(e=>e.ez));return e.map((e,n)=>e.toAffine(t[n])).map(y.fromAffine)}static msm(e,t){return Yn(y,d,e,t)}_setWindowSize(e){S.setWindowSize(this,e)}assertValidity(){v(this)}equals(e){g(e);let{ex:t,ey:n,ez:r}=this,{ex:i,ey:a,ez:o}=e,s=u(t*o),c=u(i*r),l=u(n*o),d=u(a*r);return s===c&&l===d}is0(){return this.equals(y.ZERO)}negate(){return new y(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){let{a:e}=t,{ex:n,ey:r,ez:i}=this,a=u(n*n),o=u(r*r),s=u(Zn*u(i*i)),c=u(e*a),l=n+r,d=u(u(l*l)-a-o),f=c+o,p=f-s,m=c-o,h=u(d*p),g=u(f*m),_=u(d*m);return new y(h,g,u(p*f),_)}add(e){g(e);let{a:n,d:r}=t,{ex:i,ey:a,ez:o,et:s}=this,{ex:c,ey:l,ez:d,et:f}=e;if(n===BigInt(-1)){let e=u((a-i)*(l+c)),t=u((a+i)*(l-c)),n=u(t-e);if(n===K)return this.double();let r=u(o*Zn*f),p=u(s*Zn*d),m=p+r,h=t+e,g=p-r,_=u(m*n),v=u(h*g),b=u(m*g);return new y(_,v,u(n*h),b)}let p=u(i*c),m=u(a*l),h=u(s*r*f),_=u(o*d),v=u((i+a)*(c+l)-p-m),b=_-h,x=_+h,S=u(m-n*p),C=u(v*b),w=u(x*S),T=u(v*S);return new y(C,w,u(b*x),T)}subtract(e){return this.add(e.negate())}wNAF(e){return S.wNAFCached(this,e,y.normalizeZ)}multiply(e){let t=e;z(`scalar`,t,q,r);let{p:n,f:i}=this.wNAF(t);return y.normalizeZ([n,i])[0]}multiplyUnsafe(e,t=y.ZERO){let n=e;return z(`scalar`,n,K,r),n===K?x:this.is0()||n===q?this:S.wNAFCachedUnsafe(this,n,y.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return S.unsafeLadder(this,r).is0()}toAffine(e){return _(this,e)}clearCofactor(){let{h:e}=t;return e===q?this:this.multiplyUnsafe(e)}static fromHex(e,r=!1){let{d:i,a}=t,o=n.BYTES;e=R(`pointHex`,e,o),on(`zip215`,r);let s=e.slice(),c=e[o-1];s[o-1]=c&-129;let d=pn(s);z(`pointHex.y`,d,K,r?l:n.ORDER);let p=u(d*d),{isValid:m,value:h}=f(u(p-q),u(i*p-a));if(!m)throw Error(`Point.fromHex: invalid y coordinate`);let g=(h&q)===q,_=(c&128)!=0;if(!r&&h===K&&_)throw Error(`Point.fromHex: x=0 and x_0=1`);return _!==g&&(h=u(-h)),y.fromAffine({x:h,y:d})}static fromPrivateKey(e){return T(e).point}toRawBytes(){let{x:e,y:t}=this.toAffine(),r=hn(t,n.BYTES);return r[r.length-1]|=e&q?128:0,r}toHex(){return cn(this.toRawBytes())}}y.BASE=new y(t.Gx,t.Gy,q,u(t.Gx*t.Gy)),y.ZERO=new y(K,q,q,K);let{BASE:b,ZERO:x}=y,S=Jn(y,s*8);function C(e){return U(e,r)}function w(e){return C(pn(e))}function T(e){let t=n.BYTES;e=R(`private key`,e,t);let r=R(`hashed private key`,a(e),2*t),i=p(r.slice(0,t)),o=r.slice(t,2*t),s=w(i),c=b.multiply(s);return{head:i,prefix:o,scalar:s,point:c,pointBytes:c.toRawBytes()}}function E(e){return T(e).pointBytes}function D(e=new Uint8Array,...t){return w(a(m(gn(...t),R(`context`,e),!!i)))}function ee(e,t,a={}){e=R(`message`,e),i&&(e=i(e));let{prefix:o,scalar:s,pointBytes:c}=T(t),l=D(a.context,o,e),u=b.multiply(l).toRawBytes(),d=C(l+D(a.context,u,c,e)*s);return z(`signature.s`,d,K,r),R(`result`,gn(u,hn(d,n.BYTES)),n.BYTES*2)}let te=$n;function ne(e,t,r,a=te){let{context:o,zip215:s}=a,c=n.BYTES;e=R(`signature`,e,2*c),t=R(`message`,t),r=R(`publicKey`,r,c),s!==void 0&&on(`zip215`,s),i&&(t=i(t));let l=pn(e.slice(c,2*c)),u,d,f;try{u=y.fromHex(r,s),d=y.fromHex(e.slice(0,c),s),f=b.multiplyUnsafe(l)}catch{return!1}if(!s&&u.isSmallOrder())return!1;let p=D(o,d.toRawBytes(),u.toRawBytes(),t);return d.add(u.multiplyUnsafe(p)).subtract(f).clearCofactor().equals(y.ZERO)}return b._setWindowSize(8),{CURVE:t,getPublicKey:E,sign:ee,verify:ne,ExtendedPoint:y,utils:{getExtendedPublicKey:T,randomPrivateKey:()=>o(n.BYTES),precompute(e=8,t=y.BASE){return t._setWindowSize(e),t.multiply(BigInt(3)),t}}}}var nr=BigInt(`57896044618658097711785492504343953926634992332820282019728792003956564819949`),rr=BigInt(`19681161376707505956807079304988542015446066515923890162744021073123829784752`),ir=BigInt(1),ar=BigInt(2),or=BigInt(5),sr=BigInt(8);function cr(e){let t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),a=nr,o=e*e%a*e%a,s=W(W(o,ar,a)*o%a,ir,a)*e%a,c=W(s,or,a)*s%a,l=W(c,t,a)*c%a,u=W(l,n,a)*l%a,d=W(u,r,a)*u%a;return{pow_p_5_8:W(W(W(W(d,i,a)*d%a,i,a)*d%a,t,a)*c%a,ar,a)*e%a,b2:o}}function lr(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function ur(e,t){let n=nr,r=U(t*t*t,n),i=cr(e*U(r*r*t,n)).pow_p_5_8,a=U(e*r*i,n),o=U(t*a*a,n),s=a,c=U(a*rr,n),l=o===e,u=o===U(-e,n),d=o===U(-e*rr,n);return l&&(a=s),(u||d)&&(a=c),Mn(a,n)&&(a=U(-a,n)),{isValid:l||u,value:a}}var dr=(()=>Rn(nr,void 0,!0))(),fr=(()=>({a:BigInt(-1),d:BigInt(`37095705934669439343138083508754565189542113879843219016388785533085940283555`),Fp:dr,n:BigInt(`7237005577332262213973186563042994240857116359379907606001950938285454250989`),h:sr,Gx:BigInt(`15112221349535400772501151409588531511454012693041857206046113283949847762202`),Gy:BigInt(`46316835694926478169428394003475163141307993866256225615783033603165251855960`),hash:$t,randomBytes:kt,adjustScalarBytes:lr,uvRatio:ur}))(),pr=(()=>tr(fr))(),mr=`EdDSA`,hr=`base64url`,gr=`utf8`,_r=`utf8`,vr=`base58btc`;function yr(e){return globalThis.Buffer==null?e:new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function br(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?yr(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function xr(e,t){t||=e.reduce((e,t)=>e+t.length,0);let n=br(t),r=0;for(let t of e)n.set(t,r),r+=t.length;return yr(n)}function Sr(e,t){if(e.length>=255)throw TypeError(`Alphabet too long`);for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),o=a.charCodeAt(0);if(n[o]!==255)throw TypeError(a+` is ambiguous`);n[o]=i}var s=e.length,c=e.charAt(0),l=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function d(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError(`Expected Uint8Array`);if(t.length===0)return``;for(var n=0,r=0,i=0,a=t.length;i!==a&&t[i]===0;)i++,n++;for(var o=(a-i)*u+1>>>0,l=new Uint8Array(o);i!==a;){for(var d=t[i],f=0,p=o-1;(d!==0||f<r)&&p!==-1;p--,f++)d+=256*l[p]>>>0,l[p]=d%s>>>0,d=d/s>>>0;if(d!==0)throw Error(`Non-zero carry`);r=f,i++}for(var m=o-r;m!==o&&l[m]===0;)m++;for(var h=c.repeat(n);m<o;++m)h+=e.charAt(l[m]);return h}function f(e){if(typeof e!=`string`)throw TypeError(`Expected String`);if(e.length===0)return new Uint8Array;var t=0;if(e[t]!==` `){for(var r=0,i=0;e[t]===c;)r++,t++;for(var a=(e.length-t)*l+1>>>0,o=new Uint8Array(a);e[t];){var u=n[e.charCodeAt(t)];if(u===255)return;for(var d=0,f=a-1;(u!==0||d<i)&&f!==-1;f--,d++)u+=s*o[f]>>>0,o[f]=u%256>>>0,u=u/256>>>0;if(u!==0)throw Error(`Non-zero carry`);i=d,t++}if(e[t]!==` `){for(var p=a-i;p!==a&&o[p]===0;)p++;for(var m=new Uint8Array(r+(a-p)),h=r;p!==a;)m[h++]=o[p++];return m}}}function p(e){var n=f(e);if(n)return n;throw Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:f,decode:p}}var Cr=Sr,wr=e=>{if(e instanceof Uint8Array&&e.constructor.name===`Uint8Array`)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error(`Unknown type, must be binary type`)},Tr=e=>new TextEncoder().encode(e),Er=e=>new TextDecoder().decode(e),Dr=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error(`Unknown type, must be binary type`)}},Or=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw Error(`Invalid prefix character`);this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e==`string`){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error(`Can only multibase decode strings`)}or(e){return Ar(this,e)}},kr=class{constructor(e){this.decoders=e}or(e){return Ar(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Ar=(e,t)=>new kr({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),jr=class{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new Dr(e,t,n),this.decoder=new Or(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Mr=({name:e,prefix:t,encode:n,decode:r})=>new jr(e,t,n,r),J=({prefix:e,name:t,alphabet:n})=>{let{encode:r,decode:i}=Cr(n,t);return Mr({prefix:e,name:t,encode:r,decode:e=>wr(i(e))})},Nr=(e,t,n,r)=>{let i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let a=e.length;for(;e[a-1]===`=`;)--a;let o=new Uint8Array(a*n/8|0),s=0,c=0,l=0;for(let t=0;t<a;++t){let a=i[e[t]];if(a===void 0)throw SyntaxError(`Non-${r} character`);c=c<<n|a,s+=n,s>=8&&(s-=8,o[l++]=255&c>>s)}if(s>=n||255&c<<8-s)throw SyntaxError(`Unexpected end of data`);return o},Pr=(e,t,n)=>{let r=t[t.length-1]===`=`,i=(1<<n)-1,a=``,o=0,s=0;for(let r=0;r<e.length;++r)for(s=s<<8|e[r],o+=8;o>n;)o-=n,a+=t[i&s>>o];if(o&&(a+=t[i&s<<n-o]),r)for(;a.length*n&7;)a+=`=`;return a},Y=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Mr({prefix:t,name:e,encode(e){return Pr(e,r,n)},decode(t){return Nr(t,r,n,e)}}),Fr=Mr({prefix:`\0`,name:`identity`,encode:e=>Er(e),decode:e=>Tr(e)}),Ir=Object.freeze({__proto__:null,identity:Fr}),Lr=Y({prefix:`0`,name:`base2`,alphabet:`01`,bitsPerChar:1}),Rr=Object.freeze({__proto__:null,base2:Lr}),zr=Y({prefix:`7`,name:`base8`,alphabet:`01234567`,bitsPerChar:3}),Br=Object.freeze({__proto__:null,base8:zr}),Vr=J({prefix:`9`,name:`base10`,alphabet:`0123456789`}),Hr=Object.freeze({__proto__:null,base10:Vr}),Ur=Y({prefix:`f`,name:`base16`,alphabet:`0123456789abcdef`,bitsPerChar:4}),Wr=Y({prefix:`F`,name:`base16upper`,alphabet:`0123456789ABCDEF`,bitsPerChar:4}),Gr=Object.freeze({__proto__:null,base16:Ur,base16upper:Wr}),Kr=Y({prefix:`b`,name:`base32`,alphabet:`abcdefghijklmnopqrstuvwxyz234567`,bitsPerChar:5}),qr=Y({prefix:`B`,name:`base32upper`,alphabet:`ABCDEFGHIJKLMNOPQRSTUVWXYZ234567`,bitsPerChar:5}),Jr=Y({prefix:`c`,name:`base32pad`,alphabet:`abcdefghijklmnopqrstuvwxyz234567=`,bitsPerChar:5}),Yr=Y({prefix:`C`,name:`base32padupper`,alphabet:`ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=`,bitsPerChar:5}),Xr=Y({prefix:`v`,name:`base32hex`,alphabet:`0123456789abcdefghijklmnopqrstuv`,bitsPerChar:5}),Zr=Y({prefix:`V`,name:`base32hexupper`,alphabet:`0123456789ABCDEFGHIJKLMNOPQRSTUV`,bitsPerChar:5}),Qr=Y({prefix:`t`,name:`base32hexpad`,alphabet:`0123456789abcdefghijklmnopqrstuv=`,bitsPerChar:5}),$r=Y({prefix:`T`,name:`base32hexpadupper`,alphabet:`0123456789ABCDEFGHIJKLMNOPQRSTUV=`,bitsPerChar:5}),ei=Y({prefix:`h`,name:`base32z`,alphabet:`ybndrfg8ejkmcpqxot1uwisza345h769`,bitsPerChar:5}),ti=Object.freeze({__proto__:null,base32:Kr,base32upper:qr,base32pad:Jr,base32padupper:Yr,base32hex:Xr,base32hexupper:Zr,base32hexpad:Qr,base32hexpadupper:$r,base32z:ei}),ni=J({prefix:`k`,name:`base36`,alphabet:`0123456789abcdefghijklmnopqrstuvwxyz`}),ri=J({prefix:`K`,name:`base36upper`,alphabet:`0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ`}),ii=Object.freeze({__proto__:null,base36:ni,base36upper:ri}),ai=J({name:`base58btc`,prefix:`z`,alphabet:`123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz`}),oi=J({name:`base58flickr`,prefix:`Z`,alphabet:`123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ`}),si=Object.freeze({__proto__:null,base58btc:ai,base58flickr:oi}),ci=Y({prefix:`m`,name:`base64`,alphabet:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,bitsPerChar:6}),li=Y({prefix:`M`,name:`base64pad`,alphabet:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=`,bitsPerChar:6}),ui=Y({prefix:`u`,name:`base64url`,alphabet:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_`,bitsPerChar:6}),di=Y({prefix:`U`,name:`base64urlpad`,alphabet:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=`,bitsPerChar:6}),fi=Object.freeze({__proto__:null,base64:ci,base64pad:li,base64url:ui,base64urlpad:di}),pi=Array.from(``),mi=pi.reduce((e,t,n)=>(e[n]=t,e),[]),hi=pi.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function gi(e){return e.reduce((e,t)=>(e+=mi[t],e),``)}function _i(e){let t=[];for(let n of e){let e=hi[n.codePointAt(0)];if(e===void 0)throw Error(`Non-base256emoji character: ${n}`);t.push(e)}return new Uint8Array(t)}var vi=Mr({prefix:``,name:`base256emoji`,encode:gi,decode:_i}),yi=Object.freeze({__proto__:null,base256emoji:vi}),bi=wi,xi=128,Si=-128,Ci=2**31;function wi(e,t,n){t||=[],n||=0;for(var r=n;e>=Ci;)t[n++]=e&255|xi,e/=128;for(;e&Si;)t[n++]=e&255|xi,e>>>=7;return t[n]=e|0,wi.bytes=n-r+1,t}var Ti=Oi,Ei=128,Di=127;function Oi(e,t){var n=0,t=t||0,r=0,i=t,a,o=e.length;do{if(i>=o)throw Oi.bytes=0,RangeError(`Could not decode varint`);a=e[i++],n+=r<28?(a&Di)<<r:(a&Di)*2**r,r+=7}while(a>=Ei);return Oi.bytes=i-t,n}var ki=2**7,Ai=2**14,ji=2**21,Mi=2**28,Ni=2**35,Pi=2**42,Fi=2**49,Ii=2**56,Li=2**63,Ri={encode:bi,decode:Ti,encodingLength:function(e){return e<ki?1:e<Ai?2:e<ji?3:e<Mi?4:e<Ni?5:e<Pi?6:e<Fi?7:e<Ii?8:e<Li?9:10}},zi=(e,t,n=0)=>(Ri.encode(e,t,n),t),Bi=e=>Ri.encodingLength(e),Vi=(e,t)=>{let n=t.byteLength,r=Bi(e),i=r+Bi(n),a=new Uint8Array(i+n);return zi(e,a,0),zi(n,a,r),a.set(t,i),new Hi(e,n,t,a)},Hi=class{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}},Ui=({name:e,code:t,encode:n})=>new Wi(e,t,n),Wi=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?Vi(this.code,t):t.then(e=>Vi(this.code,e))}else throw Error(`Unknown type, must be binary type`)}},Gi=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Ki=Ui({name:`sha2-256`,code:18,encode:Gi(`SHA-256`)}),qi=Ui({name:`sha2-512`,code:19,encode:Gi(`SHA-512`)}),Ji=Object.freeze({__proto__:null,sha256:Ki,sha512:qi}),Yi=0,Xi=`identity`,Zi=wr,Qi={code:Yi,name:Xi,encode:Zi,digest:e=>Vi(Yi,Zi(e))},$i=Object.freeze({__proto__:null,identity:Qi});new TextEncoder,new TextDecoder;var ea={...Ir,...Rr,...Br,...Hr,...Gr,...ti,...ii,...si,...fi,...yi};({...Ji,...$i});function ta(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}var na=ta(`utf8`,`u`,e=>`u`+new TextDecoder(`utf8`).decode(e),e=>new TextEncoder().encode(e.substring(1))),ra=ta(`ascii`,`a`,e=>{let t=`a`;for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);let t=br(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),ia={utf8:na,"utf-8":na,hex:ea.base16,latin1:ra,ascii:ra,binary:ra,...ea};function aa(e,t=`utf8`){let n=ia[t];if(!n)throw Error(`Unsupported encoding "${t}"`);return(t===`utf8`||t===`utf-8`)&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString(`utf8`):n.encoder.encode(e).substring(1)}function X(e,t=`utf8`){let n=ia[t];if(!n)throw Error(`Unsupported encoding "${t}"`);return(t===`utf8`||t===`utf-8`)&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?yr(globalThis.Buffer.from(e,`utf-8`)):n.decoder.decode(`${n.prefix}${e}`)}function oa(e){return d(aa(X(e,hr),gr))}function Z(e){return aa(X(a(e),gr),hr)}function sa(e){return[`did`,`key`,`z`+aa(xr([X(`K36`,vr),e]),vr)].join(`:`)}function ca(e){return aa(e,hr)}function la(e){return X(e,hr)}function ua(e){return X([Z(e.header),Z(e.payload)].join(`.`),_r)}function da(e){return[Z(e.header),Z(e.payload),ca(e.signature)].join(`.`)}function fa(e){let t=e.split(`.`);return{header:oa(t[0]),payload:oa(t[1]),signature:la(t[2]),data:X(t.slice(0,2).join(`.`),_r)}}function pa(e=kt(32)){let t=pr.getPublicKey(e);return{secretKey:xr([e,t]),publicKey:t}}async function ma(e,t,n,r,i=(0,yt.fromMiliseconds)(Date.now())){let a={alg:mr,typ:`JWT`},o={iss:sa(r.publicKey),sub:e,aud:t,iat:i,exp:i+n},s=ua({header:a,payload:o});return da({header:a,payload:o,signature:pr.sign(s,r.secretKey.slice(0,32))})}var ha=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||=Array.prototype.slice.call(t,0,r),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},ga=function(){function e(e,t,n){this.name=e,this.version=t,this.os=n,this.type=`browser`}return e}(),_a=function(){function e(e){this.version=e,this.type=`node`,this.name=`node`,this.os=process.platform}return e}(),va=function(){function e(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type=`bot-device`}return e}(),ya=function(){function e(){this.type=`bot`,this.bot=!0,this.name=`bot`,this.version=null,this.os=null}return e}(),ba=function(){function e(){this.type=`react-native`,this.name=`react-native`,this.version=null,this.os=null}return e}(),xa=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Sa=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Ca=3,wa=[[`aol`,/AOLShield\/([0-9\._]+)/],[`edge`,/Edge\/([0-9\._]+)/],[`edge-ios`,/EdgiOS\/([0-9\._]+)/],[`yandexbrowser`,/YaBrowser\/([0-9\._]+)/],[`kakaotalk`,/KAKAOTALK\s([0-9\.]+)/],[`samsung`,/SamsungBrowser\/([0-9\.]+)/],[`silk`,/\bSilk\/([0-9._-]+)\b/],[`miui`,/MiuiBrowser\/([0-9\.]+)$/],[`beaker`,/BeakerBrowser\/([0-9\.]+)/],[`edge-chromium`,/EdgA?\/([0-9\.]+)/],[`chromium-webview`,/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],[`chrome`,/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],[`phantomjs`,/PhantomJS\/([0-9\.]+)(:?\s|$)/],[`crios`,/CriOS\/([0-9\.]+)(:?\s|$)/],[`firefox`,/Firefox\/([0-9\.]+)(?:\s|$)/],[`fxios`,/FxiOS\/([0-9\.]+)/],[`opera-mini`,/Opera Mini.*Version\/([0-9\.]+)/],[`opera`,/Opera\/([0-9\.]+)(?:\s|$)/],[`opera`,/OPR\/([0-9\.]+)(:?\s|$)/],[`pie`,/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],[`pie`,/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],[`netfront`,/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],[`ie`,/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],[`ie`,/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],[`ie`,/MSIE\s(7\.0)/],[`bb10`,/BB10;\sTouch.*Version\/([0-9\.]+)/],[`android`,/Android\s([0-9\.]+)/],[`ios`,/Version\/([0-9\._]+).*Mobile.*Safari.*/],[`safari`,/Version\/([0-9\._]+).*Safari/],[`facebook`,/FB[AS]V\/([0-9\.]+)/],[`instagram`,/Instagram\s([0-9\.]+)/],[`ios-webview`,/AppleWebKit\/([0-9\.]+).*Mobile/],[`ios-webview`,/AppleWebKit\/([0-9\.]+).*Gecko\)$/],[`curl`,/^curl\/([0-9\.]+)$/],[`searchbot`,xa]],Ta=[[`iOS`,/iP(hone|od|ad)/],[`Android OS`,/Android/],[`BlackBerry OS`,/BlackBerry|BB10/],[`Windows Mobile`,/IEMobile/],[`Amazon OS`,/Kindle/],[`Windows 3.11`,/Win16/],[`Windows 95`,/(Windows 95)|(Win95)|(Windows_95)/],[`Windows 98`,/(Windows 98)|(Win98)/],[`Windows 2000`,/(Windows NT 5.0)|(Windows 2000)/],[`Windows XP`,/(Windows NT 5.1)|(Windows XP)/],[`Windows Server 2003`,/(Windows NT 5.2)/],[`Windows Vista`,/(Windows NT 6.0)/],[`Windows 7`,/(Windows NT 6.1)/],[`Windows 8`,/(Windows NT 6.2)/],[`Windows 8.1`,/(Windows NT 6.3)/],[`Windows 10`,/(Windows NT 10.0)/],[`Windows ME`,/Windows ME/],[`Windows CE`,/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],[`Open BSD`,/OpenBSD/],[`Sun OS`,/SunOS/],[`Chrome OS`,/CrOS/],[`Linux`,/(Linux)|(X11)/],[`Mac OS`,/(Mac_PowerPC)|(Macintosh)/],[`QNX`,/QNX/],[`BeOS`,/BeOS/],[`OS/2`,/OS\/2/]];function Ea(e){return e?Oa(e):typeof document>`u`&&typeof navigator<`u`&&navigator.product===`ReactNative`?new ba:typeof navigator<`u`?Oa(navigator.userAgent):Aa()}function Da(e){return e!==``&&wa.reduce(function(t,n){var r=n[0],i=n[1];if(t)return t;var a=i.exec(e);return!!a&&[r,a]},!1)}function Oa(e){var t=Da(e);if(!t)return null;var n=t[0],r=t[1];if(n===`searchbot`)return new ya;var i=r[1]&&r[1].split(`.`).join(`_`).split(`_`).slice(0,3);i?i.length<Ca&&(i=ha(ha([],i,!0),ja(Ca-i.length),!0)):i=[];var a=i.join(`.`),o=ka(e),s=Sa.exec(e);return s&&s[1]?new va(n,a,o,s[1]):new ga(n,a,o)}function ka(e){for(var t=0,n=Ta.length;t<n;t++){var r=Ta[t],i=r[0];if(r[1].exec(e))return i}return null}function Aa(){return typeof process<`u`&&process.version?new _a(process.version.slice(1)):null}function ja(e){for(var t=[],n=0;n<e;n++)t.push(`0`);return t}var Ma=n((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getLocalStorage=e.getLocalStorageOrThrow=e.getCrypto=e.getCryptoOrThrow=e.getLocation=e.getLocationOrThrow=e.getNavigator=e.getNavigatorOrThrow=e.getDocument=e.getDocumentOrThrow=e.getFromWindowOrThrow=e.getFromWindow=void 0;function t(e){let t;return typeof window<`u`&&window[e]!==void 0&&(t=window[e]),t}e.getFromWindow=t;function n(e){let n=t(e);if(!n)throw Error(`${e} is not defined in Window`);return n}e.getFromWindowOrThrow=n;function r(){return n(`document`)}e.getDocumentOrThrow=r;function i(){return t(`document`)}e.getDocument=i;function a(){return n(`navigator`)}e.getNavigatorOrThrow=a;function o(){return t(`navigator`)}e.getNavigator=o;function s(){return n(`location`)}e.getLocationOrThrow=s;function c(){return t(`location`)}e.getLocation=c;function l(){return n(`crypto`)}e.getCryptoOrThrow=l;function u(){return t(`crypto`)}e.getCrypto=u;function d(){return n(`localStorage`)}e.getLocalStorageOrThrow=d;function f(){return t(`localStorage`)}e.getLocalStorage=f})),Na=n((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.getWindowMetadata=void 0;var t=Ma();function n(){let e,n;try{e=t.getDocumentOrThrow(),n=t.getLocationOrThrow()}catch{return null}function r(){let t=e.getElementsByTagName(`link`),r=[];for(let e=0;e<t.length;e++){let i=t[e],a=i.getAttribute(`rel`);if(a&&a.toLowerCase().indexOf(`icon`)>-1){let e=i.getAttribute(`href`);if(e)if(e.toLowerCase().indexOf(`https:`)===-1&&e.toLowerCase().indexOf(`http:`)===-1&&e.indexOf(`//`)!==0){let t=n.protocol+`//`+n.host;if(e.indexOf(`/`)===0)t+=e;else{let r=n.pathname.split(`/`);r.pop();let i=r.join(`/`);t+=i+`/`+e}r.push(t)}else if(e.indexOf(`//`)===0){let t=n.protocol+e;r.push(t)}else r.push(e)}}return r}function i(...t){let n=e.getElementsByTagName(`meta`);for(let e=0;e<n.length;e++){let r=n[e],i=[`itemprop`,`property`,`name`].map(e=>r.getAttribute(e)).filter(e=>e?t.includes(e):!1);if(i.length&&i){let e=r.getAttribute(`content`);if(e)return e}}return``}function a(){let t=i(`name`,`og:site_name`,`og:title`,`twitter:title`);return t||=e.title,t}function o(){return i(`description`,`og:description`,`twitter:description`,`keywords`)}let s=a();return{description:o(),url:n.origin,icons:r(),name:s}}e.getWindowMetadata=n}));function Pa(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function Fa(e,t){t||=e.reduce((e,t)=>e+t.length,0);let n=Pa(t),r=0;for(let t of e)n.set(t,r),r+=t.length;return n}function Ia(e,t){if(e.length>=255)throw TypeError(`Alphabet too long`);for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),o=a.charCodeAt(0);if(n[o]!==255)throw TypeError(a+` is ambiguous`);n[o]=i}var s=e.length,c=e.charAt(0),l=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function d(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError(`Expected Uint8Array`);if(t.length===0)return``;for(var n=0,r=0,i=0,a=t.length;i!==a&&t[i]===0;)i++,n++;for(var o=(a-i)*u+1>>>0,l=new Uint8Array(o);i!==a;){for(var d=t[i],f=0,p=o-1;(d!==0||f<r)&&p!==-1;p--,f++)d+=256*l[p]>>>0,l[p]=d%s>>>0,d=d/s>>>0;if(d!==0)throw Error(`Non-zero carry`);r=f,i++}for(var m=o-r;m!==o&&l[m]===0;)m++;for(var h=c.repeat(n);m<o;++m)h+=e.charAt(l[m]);return h}function f(e){if(typeof e!=`string`)throw TypeError(`Expected String`);if(e.length===0)return new Uint8Array;var t=0;if(e[t]!==` `){for(var r=0,i=0;e[t]===c;)r++,t++;for(var a=(e.length-t)*l+1>>>0,o=new Uint8Array(a);e[t];){var u=n[e.charCodeAt(t)];if(u===255)return;for(var d=0,f=a-1;(u!==0||d<i)&&f!==-1;f--,d++)u+=s*o[f]>>>0,o[f]=u%256>>>0,u=u/256>>>0;if(u!==0)throw Error(`Non-zero carry`);i=d,t++}if(e[t]!==` `){for(var p=a-i;p!==a&&o[p]===0;)p++;for(var m=new Uint8Array(r+(a-p)),h=r;p!==a;)m[h++]=o[p++];return m}}}function p(e){var n=f(e);if(n)return n;throw Error(`Non-${t} character`)}return{encode:d,decodeUnsafe:f,decode:p}}var La=Ia;new Uint8Array;var Ra=e=>{if(e instanceof Uint8Array&&e.constructor.name===`Uint8Array`)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error(`Unknown type, must be binary type`)},za=e=>new TextEncoder().encode(e),Ba=e=>new TextDecoder().decode(e),Va=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error(`Unknown type, must be binary type`)}},Ha=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw Error(`Invalid prefix character`);this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e==`string`){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error(`Can only multibase decode strings`)}or(e){return Wa(this,e)}},Ua=class{constructor(e){this.decoders=e}or(e){return Wa(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const Wa=(e,t)=>new Ua({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});var Ga=class{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new Va(e,t,n),this.decoder=new Ha(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Ka=({name:e,prefix:t,encode:n,decode:r})=>new Ga(e,t,n,r),Q=({prefix:e,name:t,alphabet:n})=>{let{encode:r,decode:i}=La(n,t);return Ka({prefix:e,name:t,encode:r,decode:e=>Ra(i(e))})};var qa=(e,t,n,r)=>{let i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let a=e.length;for(;e[a-1]===`=`;)--a;let o=new Uint8Array(a*n/8|0),s=0,c=0,l=0;for(let t=0;t<a;++t){let a=i[e[t]];if(a===void 0)throw SyntaxError(`Non-${r} character`);c=c<<n|a,s+=n,s>=8&&(s-=8,o[l++]=255&c>>s)}if(s>=n||255&c<<8-s)throw SyntaxError(`Unexpected end of data`);return o},Ja=(e,t,n)=>{let r=t[t.length-1]===`=`,i=(1<<n)-1,a=``,o=0,s=0;for(let r=0;r<e.length;++r)for(s=s<<8|e[r],o+=8;o>n;)o-=n,a+=t[i&s>>o];if(o&&(a+=t[i&s<<n-o]),r)for(;a.length*n&7;)a+=`=`;return a};const $=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Ka({prefix:t,name:e,encode(e){return Ja(e,r,n)},decode(t){return qa(t,r,n,e)}});var Ya=e({identity:()=>Xa});const Xa=Ka({prefix:`\0`,name:`identity`,encode:e=>Ba(e),decode:e=>za(e)});var Za=e({base2:()=>Qa});const Qa=$({prefix:`0`,name:`base2`,alphabet:`01`,bitsPerChar:1});var $a=e({base8:()=>eo});const eo=$({prefix:`7`,name:`base8`,alphabet:`01234567`,bitsPerChar:3});var to=e({base10:()=>no});const no=Q({prefix:`9`,name:`base10`,alphabet:`0123456789`});var ro=e({base16:()=>io,base16upper:()=>ao});const io=$({prefix:`f`,name:`base16`,alphabet:`0123456789abcdef`,bitsPerChar:4}),ao=$({prefix:`F`,name:`base16upper`,alphabet:`0123456789ABCDEF`,bitsPerChar:4});var oo=e({base32:()=>so,base32hex:()=>fo,base32hexpad:()=>mo,base32hexpadupper:()=>ho,base32hexupper:()=>po,base32pad:()=>lo,base32padupper:()=>uo,base32upper:()=>co,base32z:()=>go});const so=$({prefix:`b`,name:`base32`,alphabet:`abcdefghijklmnopqrstuvwxyz234567`,bitsPerChar:5}),co=$({prefix:`B`,name:`base32upper`,alphabet:`ABCDEFGHIJKLMNOPQRSTUVWXYZ234567`,bitsPerChar:5}),lo=$({prefix:`c`,name:`base32pad`,alphabet:`abcdefghijklmnopqrstuvwxyz234567=`,bitsPerChar:5}),uo=$({prefix:`C`,name:`base32padupper`,alphabet:`ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=`,bitsPerChar:5}),fo=$({prefix:`v`,name:`base32hex`,alphabet:`0123456789abcdefghijklmnopqrstuv`,bitsPerChar:5}),po=$({prefix:`V`,name:`base32hexupper`,alphabet:`0123456789ABCDEFGHIJKLMNOPQRSTUV`,bitsPerChar:5}),mo=$({prefix:`t`,name:`base32hexpad`,alphabet:`0123456789abcdefghijklmnopqrstuv=`,bitsPerChar:5}),ho=$({prefix:`T`,name:`base32hexpadupper`,alphabet:`0123456789ABCDEFGHIJKLMNOPQRSTUV=`,bitsPerChar:5}),go=$({prefix:`h`,name:`base32z`,alphabet:`ybndrfg8ejkmcpqxot1uwisza345h769`,bitsPerChar:5});var _o=e({base36:()=>vo,base36upper:()=>yo});const vo=Q({prefix:`k`,name:`base36`,alphabet:`0123456789abcdefghijklmnopqrstuvwxyz`}),yo=Q({prefix:`K`,name:`base36upper`,alphabet:`0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ`});var bo=e({base58btc:()=>xo,base58flickr:()=>So});const xo=Q({name:`base58btc`,prefix:`z`,alphabet:`123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz`}),So=Q({name:`base58flickr`,prefix:`Z`,alphabet:`123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ`});var Co=e({base64:()=>wo,base64pad:()=>To,base64url:()=>Eo,base64urlpad:()=>Do});const wo=$({prefix:`m`,name:`base64`,alphabet:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,bitsPerChar:6}),To=$({prefix:`M`,name:`base64pad`,alphabet:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=`,bitsPerChar:6}),Eo=$({prefix:`u`,name:`base64url`,alphabet:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_`,bitsPerChar:6}),Do=$({prefix:`U`,name:`base64urlpad`,alphabet:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=`,bitsPerChar:6});var Oo=e({base256emoji:()=>Po}),ko=Array.from(``),Ao=ko.reduce((e,t,n)=>(e[n]=t,e),[]),jo=ko.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function Mo(e){return e.reduce((e,t)=>(e+=Ao[t],e),``)}function No(e){let t=[];for(let n of e){let e=jo[n.codePointAt(0)];if(e===void 0)throw Error(`Non-base256emoji character: ${n}`);t.push(e)}return new Uint8Array(t)}const Po=Ka({prefix:``,name:`base256emoji`,encode:Mo,decode:No});var Fo=zo,Io=128,Lo=-128,Ro=2**31;function zo(e,t,n){t||=[],n||=0;for(var r=n;e>=Ro;)t[n++]=e&255|Io,e/=128;for(;e&Lo;)t[n++]=e&255|Io,e>>>=7;return t[n]=e|0,zo.bytes=n-r+1,t}var Bo=Uo,Vo=128,Ho=127;function Uo(e,t){var n=0,t=t||0,r=0,i=t,a,o=e.length;do{if(i>=o)throw Uo.bytes=0,RangeError(`Could not decode varint`);a=e[i++],n+=r<28?(a&Ho)<<r:(a&Ho)*2**r,r+=7}while(a>=Vo);return Uo.bytes=i-t,n}var Wo=2**7,Go=2**14,Ko=2**21,qo=2**28,Jo=2**35,Yo=2**42,Xo=2**49,Zo=2**56,Qo=2**63,$o={encode:Fo,decode:Bo,encodingLength:function(e){return e<Wo?1:e<Go?2:e<Ko?3:e<qo?4:e<Jo?5:e<Yo?6:e<Xo?7:e<Zo?8:e<Qo?9:10}};const es=(e,t,n=0)=>($o.encode(e,t,n),t),ts=e=>$o.encodingLength(e),ns=(e,t)=>{let n=t.byteLength,r=ts(e),i=r+ts(n),a=new Uint8Array(i+n);return es(e,a,0),es(n,a,r),a.set(t,i),new rs(e,n,t,a)};var rs=class{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}};const is=({name:e,code:t,encode:n})=>new as(e,t,n);var as=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?ns(this.code,t):t.then(e=>ns(this.code,e))}else throw Error(`Unknown type, must be binary type`)}},os=e({sha256:()=>cs,sha512:()=>ls}),ss=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));const cs=is({name:`sha2-256`,code:18,encode:ss(`SHA-256`)}),ls=is({name:`sha2-512`,code:19,encode:ss(`SHA-512`)});var us=e({identity:()=>ms}),ds=0,fs=`identity`,ps=Ra;const ms={code:ds,name:fs,encode:ps,digest:e=>ns(ds,ps(e))};new TextEncoder,new TextDecoder,Symbol.toStringTag;var hs={...Ya,...Za,...$a,...to,...ro,...oo,..._o,...bo,...Co,...Oo};({...os,...us});function gs(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}var _s=gs(`utf8`,`u`,e=>`u`+new TextDecoder(`utf8`).decode(e),e=>new TextEncoder().encode(e.substring(1))),vs=gs(`ascii`,`a`,e=>{let t=`a`;for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);let t=Pa(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),ys={utf8:_s,"utf-8":_s,hex:hs.base16,latin1:vs,ascii:vs,binary:vs,...hs};function bs(e,t=`utf8`){let n=ys[t];if(!n)throw Error(`Unsupported encoding "${t}"`);return(t===`utf8`||t===`utf-8`)&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e,`utf8`):n.decoder.decode(`${n.prefix}${e}`)}function xs(e,t=`utf8`){let n=ys[t];if(!n)throw Error(`Unsupported encoding "${t}"`);return(t===`utf8`||t===`utf-8`)&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString(`utf8`):n.encoder.encode(e).substring(1)}var Ss={waku:{publish:`waku_publish`,batchPublish:`waku_batchPublish`,subscribe:`waku_subscribe`,batchSubscribe:`waku_batchSubscribe`,subscription:`waku_subscription`,unsubscribe:`waku_unsubscribe`,batchUnsubscribe:`waku_batchUnsubscribe`,batchFetchMessages:`waku_batchFetchMessages`},irn:{publish:`irn_publish`,batchPublish:`irn_batchPublish`,subscribe:`irn_subscribe`,batchSubscribe:`irn_batchSubscribe`,subscription:`irn_subscription`,unsubscribe:`irn_unsubscribe`,batchUnsubscribe:`irn_batchUnsubscribe`,batchFetchMessages:`irn_batchFetchMessages`},iridium:{publish:`iridium_publish`,batchPublish:`iridium_batchPublish`,subscribe:`iridium_subscribe`,batchSubscribe:`iridium_batchSubscribe`,subscription:`iridium_subscription`,unsubscribe:`iridium_unsubscribe`,batchUnsubscribe:`iridium_batchUnsubscribe`,batchFetchMessages:`iridium_batchFetchMessages`}},Cs=n(((e,t)=>{t.exports=function(){throw Error(`ws does not work in the browser. Browser clients must use the native WebSocket object`)}})),ws=i(),Ts=()=>typeof WebSocket<`u`?WebSocket:typeof global<`u`&&typeof global.WebSocket<`u`?global.WebSocket:typeof window<`u`&&typeof window.WebSocket<`u`?window.WebSocket:typeof self<`u`&&typeof self.WebSocket<`u`?self.WebSocket:Cs(),Es=()=>typeof WebSocket<`u`||typeof global<`u`&&typeof global.WebSocket<`u`||typeof window<`u`&&typeof window.WebSocket<`u`||typeof self<`u`&&typeof self.WebSocket<`u`,Ds=e=>e.split(`?`)[0],Os=10,ks=Ts(),As=class{constructor(e){if(this.url=e,this.events=new ws.EventEmitter,this.registering=!1,!c(e))throw Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<`u`}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>`u`){t(Error(`Connection already closed`));return}this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close()})}async send(e){typeof this.socket>`u`&&(this.socket=await this.register());try{this.socket.send(a(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!c(e))throw Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){let e=this.events.getMaxListeners();return(this.events.listenerCount(`register_error`)>=e||this.events.listenerCount(`open`)>=e)&&this.events.setMaxListeners(e+1),new Promise((e,t)=>{this.events.once(`register_error`,e=>{this.resetMaxListeners(),t(e)}),this.events.once(`open`,()=>{if(this.resetMaxListeners(),typeof this.socket>`u`)return t(Error(`WebSocket connection is missing or invalid`));e(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,n)=>{let r=new ks(e,[],(0,l.isReactNative)()?void 0:{rejectUnauthorized:!o(e)});Es()?r.onerror=e=>{let t=e;n(this.emitError(t.error))}:r.on(`error`,e=>{n(this.emitError(e))}),r.onopen=()=>{this.onOpen(r),t(r)}})}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit(`open`)}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit(`close`,e)}onPayload(e){if(typeof e.data>`u`)return;let t=typeof e.data==`string`?d(e.data):e.data;this.events.emit(`payload`,t)}onError(e,t){let n=this.parseError(t),r=u(e,n.message||n.toString());this.events.emit(`payload`,r)}parseError(e,t=this.url){return s(e,Ds(t),`WS`)}resetMaxListeners(){this.events.getMaxListeners()>Os&&this.events.setMaxListeners(Os)}emitError(e){let t=this.parseError(Error(e?.message||`WebSocket connection failed for host: ${Ds(this.url)}`));return this.events.emit(`register_error`,t),t}};export{ve as _,Fa as a,Ea as c,ma as d,fa as f,ye as g,we as h,bs as i,pa as l,Te as m,Ss as n,Na as o,vt as p,xs as r,Ma as s,As as t,sa as u};