import{$t as e,Qt as t,Zt as n,en as r,nn as i,rn as a}from"./index-Ekc_aguv.js";import{t as o}from"./events-Muq4AJeu.js";var s=e=>JSON.stringify(e,(e,t)=>typeof t==`bigint`?t.toString()+`n`:t),c=e=>{let t=e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,`$1"$2n"$3`);return JSON.parse(t,(e,t)=>typeof t==`string`&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t)};function l(e){if(typeof e!=`string`)throw Error(`Cannot safe json parse value of type ${typeof e}`);try{return c(e)}catch{return e}}function u(e){return typeof e==`string`?e:s(e)||``}var d=n(((e,t)=>{function n(e){try{return JSON.stringify(e)}catch{return`"[Circular]"`}}t.exports=r;function r(e,t,r){var i=r&&r.stringify||n,a=1;if(typeof e==`object`&&e){var o=t.length+a;if(o===1)return e;var s=Array(o);s[0]=i(e);for(var c=1;c<o;c++)s[c]=i(t[c]);return s.join(` `)}if(typeof e!=`string`)return e;var l=t.length;if(l===0)return e;for(var u=``,d=1-a,f=-1,p=e&&e.length||0,m=0;m<p;){if(e.charCodeAt(m)===37&&m+1<p){switch(f=f>-1?f:0,e.charCodeAt(m+1)){case 100:case 102:if(d>=l||t[d]==null)break;f<m&&(u+=e.slice(f,m)),u+=Number(t[d]),f=m+2,m++;break;case 105:if(d>=l||t[d]==null)break;f<m&&(u+=e.slice(f,m)),u+=Math.floor(Number(t[d])),f=m+2,m++;break;case 79:case 111:case 106:if(d>=l||t[d]===void 0)break;f<m&&(u+=e.slice(f,m));var h=typeof t[d];if(h===`string`){u+=`'`+t[d]+`'`,f=m+2,m++;break}if(h===`function`){u+=t[d].name||`<anonymous>`,f=m+2,m++;break}u+=i(t[d]),f=m+2,m++;break;case 115:if(d>=l)break;f<m&&(u+=e.slice(f,m)),u+=String(t[d]),f=m+2,m++;break;case 37:f<m&&(u+=e.slice(f,m)),u+=`%`,f=m+2,m++,d--;break}++d}++m}return f===-1?e:(f<p&&(u+=e.slice(f)),u)}})),f=n(((e,t)=>{var n=d();t.exports=o;var r=w().console||{},i={mapHttpRequest:_,mapHttpResponse:_,wrapRequestSerializer:v,wrapResponseSerializer:v,wrapErrorSerializer:v,req:_,res:_,err:h};function a(e,t){return Array.isArray(e)?e.filter(function(e){return e!==`!stdSerializers.err`}):e===!0?Object.keys(t):!1}function o(e){e||={},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!=`function`)throw Error(`pino: transmit option must have a send function`);let n=e.browser.write||r;e.browser.write&&(e.browser.asObject=!0);let i=e.serializers||{},c=a(e.browser.serialize,i),l=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf(`!stdSerializers.err`)>-1&&(l=!1);let d=[`error`,`fatal`,`warn`,`info`,`debug`,`trace`];typeof n==`function`&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),e.enabled===!1&&(e.level=`silent`);let p=e.level||`info`,h=Object.create(n);h.log||=y,Object.defineProperty(h,`levelVal`,{get:v}),Object.defineProperty(h,`level`,{get:b,set:x});let _={transmit:t,serialize:c,asObject:e.browser.asObject,levels:d,timestamp:g(e)};h.levels=o.levels,h.level=p,h.setMaxListeners=h.getMaxListeners=h.emit=h.addListener=h.on=h.prependListener=h.once=h.prependOnceListener=h.removeListener=h.removeAllListeners=h.listeners=h.listenerCount=h.eventNames=h.write=h.flush=y,h.serializers=i,h._serialize=c,h._stdErrSerialize=l,h.child=S,t&&(h._logEvent=m());function v(){return this.level===`silent`?1/0:this.levels.values[this.level]}function b(){return this._level}function x(e){if(e!==`silent`&&!this.levels.values[e])throw Error(`unknown level `+e);this._level=e,s(_,h,`error`,`log`),s(_,h,`fatal`,`error`),s(_,h,`warn`,`error`),s(_,h,`info`,`log`),s(_,h,`debug`,`log`),s(_,h,`trace`,`log`)}function S(n,r){if(!n)throw Error(`missing bindings for child Pino`);r||={},c&&n.serializers&&(r.serializers=n.serializers);let a=r.serializers;if(c&&a){var o=Object.assign({},i,a),s=e.browser.serialize===!0?Object.keys(o):c;delete n.serializers,u([n],s,o,this._stdErrSerialize)}function l(e){this._childLevel=(e._childLevel|0)+1,this.error=f(e,n,`error`),this.fatal=f(e,n,`fatal`),this.warn=f(e,n,`warn`),this.info=f(e,n,`info`),this.debug=f(e,n,`debug`),this.trace=f(e,n,`trace`),o&&(this.serializers=o,this._serialize=s),t&&(this._logEvent=m([].concat(e._logEvent.bindings,n)))}return l.prototype=this,new l(this)}return h}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:`trace`,20:`debug`,30:`info`,40:`warn`,50:`error`,60:`fatal`}},o.stdSerializers=i,o.stdTimeFunctions=Object.assign({},{nullTime:b,epochTime:x,unixTime:S,isoTime:C});function s(e,t,n,i){let a=Object.getPrototypeOf(t);t[n]=t.levelVal>t.levels.values[n]?y:a[n]?a[n]:r[n]||r[i]||y,c(e,t,n)}function c(e,t,n){!e.transmit&&t[n]===y||(t[n]=(function(i){return function(){let a=e.timestamp(),s=Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===r?r:this;for(var d=0;d<s.length;d++)s[d]=arguments[d];if(e.serialize&&!e.asObject&&u(s,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?i.call(c,l(this,n,s,a)):i.apply(c,s),e.transmit){let r=e.transmit.level||t.level,i=o.levels.values[r],c=o.levels.values[n];if(c<i)return;p(this,{ts:a,methodLevel:n,methodValue:c,transmitLevel:r,transmitValue:o.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},s)}}})(t[n]))}function l(e,t,r,i){e._serialize&&u(r,e._serialize,e.serializers,e._stdErrSerialize);let a=r.slice(),s=a[0],c={};i&&(c.time=i),c.level=o.levels.values[t];let l=(e._childLevel|0)+1;if(l<1&&(l=1),typeof s==`object`&&s){for(;l--&&typeof a[0]==`object`;)Object.assign(c,a.shift());s=a.length?n(a.shift(),a):void 0}else typeof s==`string`&&(s=n(a.shift(),a));return s!==void 0&&(c.msg=s),c}function u(e,t,n,r){for(let i in e)if(r&&e[i]instanceof Error)e[i]=o.stdSerializers.err(e[i]);else if(typeof e[i]==`object`&&!Array.isArray(e[i]))for(let r in e[i])t&&t.indexOf(r)>-1&&r in n&&(e[i][r]=n[r](e[i][r]))}function f(e,t,n){return function(){let r=Array(1+arguments.length);r[0]=t;for(var i=1;i<r.length;i++)r[i]=arguments[i-1];return e[n].apply(this,r)}}function p(e,t,n){let r=t.send,i=t.ts,a=t.methodLevel,o=t.methodValue,s=t.val,c=e._logEvent.bindings;u(n,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=n.filter(function(e){return c.indexOf(e)===-1}),e._logEvent.level.label=a,e._logEvent.level.value=o,r(a,e._logEvent,s),e._logEvent=m(c)}function m(e){return{ts:0,messages:[],bindings:e||[],level:{label:``,value:0}}}function h(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let n in e)t[n]===void 0&&(t[n]=e[n]);return t}function g(e){return typeof e.timestamp==`function`?e.timestamp:e.timestamp===!1?b:x}function _(){return{}}function v(e){return e}function y(){}function b(){return!1}function x(){return Date.now()}function S(){return Math.round(Date.now()/1e3)}function C(){return new Date(Date.now()).toISOString()}function w(){function e(e){return e!==void 0&&e}try{return typeof globalThis<`u`||Object.defineProperty(Object.prototype,`globalThis`,{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}})),p=a(f()),m=a(f()),h={level:`info`},g=`custom_context`,_=1e3*1024,v=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},y=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){let t=new v(e);if(t.size>this.maxSizeInBytes)throw Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;let e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){let e=[],t=this.head;for(;t!==null;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};let t=e.value;return e=e.next,{done:!1,value:t}}}}},b=class{constructor(e,t=_){this.level=e??`error`,this.levelValue=p.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new y(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===p.levels.values.error?console.error(e):t===p.levels.values.warn?console.warn(e):t===p.levels.values.debug?console.debug(e):t===p.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(u({timestamp:new Date().toISOString(),log:e}));let t=typeof e==`string`?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new y(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){let t=this.getLogArray();return t.push(u({extraMetadata:e})),new Blob(t,{type:`application/json`})}},x=class{constructor(e,t=_){this.baseChunkLogger=new b(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){let t=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement(`a`);n.href=t,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)}},S=class{constructor(e,t=_){this.baseChunkLogger=new b(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}},C=Object.defineProperty,w=Object.defineProperties,T=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertySymbols,te=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,re=(e,t,n)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,E=(e,t)=>{for(var n in t||={})te.call(t,n)&&re(e,n,t[n]);if(ee)for(var n of ee(t))ne.call(t,n)&&re(e,n,t[n]);return e},D=(e,t)=>w(e,T(t));function ie(e){return D(E({},e),{level:e?.level||h.level})}function ae(e,t=g){return e[t]||``}function oe(e,t,n=g){return e[n]=t,e}function se(e,t=g){let n=``;return n=typeof e.bindings>`u`?ae(e,t):e.bindings().context||``,n}function ce(e,t,n=g){let r=se(e,n);return r.trim()?`${r}/${t}`:t}function le(e,t,n=g){let r=ce(e,t,n);return oe(e.child({context:r}),r,n)}function ue(e){let t=new x(e.opts?.level,e.maxSizeInBytes);return{logger:(0,p.default)(D(E({},e.opts),{level:`trace`,browser:D(E({},e.opts?.browser),{write:e=>t.write(e)})})),chunkLoggerController:t}}function de(e){let t=new S(e.opts?.level,e.maxSizeInBytes);return{logger:(0,p.default)(D(E({},e.opts),{level:`trace`}),t),chunkLoggerController:t}}function fe(e){return typeof e.loggerOverride<`u`&&typeof e.loggerOverride!=`string`?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<`u`?ue(e):de(e)}const O=`PARSE_ERROR`,pe=`INVALID_REQUEST`,me=`METHOD_NOT_FOUND`,he=`INVALID_PARAMS`,k=`INTERNAL_ERROR`,A=`SERVER_ERROR`,ge=[-32700,-32600,-32601,-32602,-32603],j=[-32e3,-32099],M={[O]:{code:-32700,message:`Parse error`},[pe]:{code:-32600,message:`Invalid Request`},[me]:{code:-32601,message:`Method not found`},[he]:{code:-32602,message:`Invalid params`},[k]:{code:-32603,message:`Internal error`},[A]:{code:-32e3,message:`Server error`}},N=A;function _e(e){return e<=j[0]&&e>=j[1]}function P(e){return ge.includes(e)}function ve(e){return typeof e==`number`}function F(e){return Object.keys(M).includes(e)?M[e]:M[N]}function I(e){return Object.values(M).find(t=>t.code===e)||M[N]}function ye(e){if(e.error.code===void 0)return{valid:!1,error:`Missing code for JSON-RPC error`};if(e.error.message===void 0)return{valid:!1,error:`Missing message for JSON-RPC error`};if(!ve(e.error.code))return{valid:!1,error:`Invalid error code type for JSON-RPC: ${e.error.code}`};if(P(e.error.code)){let t=I(e.error.code);if(t.message!==M.SERVER_ERROR.message&&e.error.message===t.message)return{valid:!1,error:`Invalid error code message for JSON-RPC: ${e.error.code}`}}return{valid:!0}}function L(e,t,n){return e.message.includes(`getaddrinfo ENOTFOUND`)||e.message.includes(`connect ECONNREFUSED`)?Error(`Unavailable ${n} RPC url at ${t}`):e}var be=e({__assign:()=>V,__asyncDelegator:()=>Pe,__asyncGenerator:()=>Ne,__asyncValues:()=>Fe,__await:()=>z,__awaiter:()=>Ee,__classPrivateFieldGet:()=>ze,__classPrivateFieldSet:()=>Be,__createBinding:()=>Oe,__decorate:()=>Ce,__exportStar:()=>ke,__extends:()=>xe,__generator:()=>De,__importDefault:()=>Re,__importStar:()=>Le,__makeTemplateObject:()=>Ie,__metadata:()=>Te,__param:()=>we,__read:()=>Ae,__rest:()=>Se,__spread:()=>je,__spreadArrays:()=>Me,__values:()=>R});function xe(e,t){B(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Se(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols==`function`)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Ce(e,t,n,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==`object`&&typeof Reflect.decorate==`function`)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function we(e,t){return function(n,r){t(n,r,e)}}function Te(e,t){if(typeof Reflect==`object`&&typeof Reflect.metadata==`function`)return Reflect.metadata(e,t)}function Ee(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||=Promise)(function(n,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){e.done?n(e.value):i(e.value).then(o,s)}c((r=r.apply(e,t||[])).next())})}function De(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==`function`&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(r)throw TypeError(`Generator is already executing.`);for(;n;)try{if(r=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if((a=n.trys,!(a=a.length>0&&a[a.length-1]))&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){n.label=o[1];break}if(o[0]===6&&n.label<a[1]){n.label=a[1],a=o;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(o);break}a[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e],i=0}finally{r=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function Oe(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}function ke(e,t){for(var n in e)n!==`default`&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function R(e){var t=typeof Symbol==`function`&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==`number`)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?`Object is not iterable.`:`Symbol.iterator is not defined.`)}function Ae(e,t){var n=typeof Symbol==`function`&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function je(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ae(arguments[t]));return e}function Me(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function z(e){return this instanceof z?(this.v=e,this):new z(e)}function Ne(e,t,n){if(!Symbol.asyncIterator)throw TypeError(`Symbol.asyncIterator is not defined.`);var r=n.apply(e,t||[]),i,a=[];return i={},o(`next`),o(`throw`),o(`return`),i[Symbol.asyncIterator]=function(){return this},i;function o(e){r[e]&&(i[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||s(e,t)})})}function s(e,t){try{c(r[e](t))}catch(e){d(a[0][3],e)}}function c(e){e.value instanceof z?Promise.resolve(e.value.v).then(l,u):d(a[0][2],e)}function l(e){s(`next`,e)}function u(e){s(`throw`,e)}function d(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}}function Pe(e){var t,n;return t={},r(`next`),r(`throw`,function(e){throw e}),r(`return`),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:z(e[r](t)),done:r===`return`}:i?i(t):t}:i}}function Fe(e){if(!Symbol.asyncIterator)throw TypeError(`Symbol.asyncIterator is not defined.`);var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof R==`function`?R(e):e[Symbol.iterator](),n={},r(`next`),r(`throw`),r(`return`),n[Symbol.asyncIterator]=function(){return this},n);function r(t){n[t]=e[t]&&function(n){return new Promise(function(r,a){n=e[t](n),i(r,a,n.done,n.value)})}}function i(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}}function Ie(e,t){return Object.defineProperty?Object.defineProperty(e,`raw`,{value:t}):e.raw=t,e}function Le(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function Re(e){return e&&e.__esModule?e:{default:e}}function ze(e,t){if(!t.has(e))throw TypeError(`attempted to get private field on non-instance`);return t.get(e)}function Be(e,t,n){if(!t.has(e))throw TypeError(`attempted to set private field on non-instance`);return t.set(e,n),n}var B,V,Ve=t((()=>{B=function(e,t){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},B(e,t)},V=function(){return V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},V.apply(this,arguments)}})),He=n((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.isBrowserCryptoAvailable=e.getSubtleCrypto=e.getBrowerCrypto=void 0;function t(){return(global==null?void 0:global.crypto)||(global==null?void 0:global.msCrypto)||{}}e.getBrowerCrypto=t;function n(){let e=t();return e.subtle||e.webkitSubtle}e.getSubtleCrypto=n;function r(){return!!t()&&!!n()}e.isBrowserCryptoAvailable=r})),Ue=n((e=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.isBrowser=e.isNode=e.isReactNative=void 0;function t(){return typeof document>`u`&&typeof navigator<`u`&&navigator.product===`ReactNative`}e.isReactNative=t;function n(){return typeof process<`u`&&process.versions!==void 0&&process.versions.node!==void 0}e.isNode=n;function r(){return!t()&&!n()}e.isBrowser=r})),We=n((e=>{Object.defineProperty(e,`__esModule`,{value:!0});var t=(Ve(),i(be));t.__exportStar(He(),e),t.__exportStar(Ue(),e)})),Ge=e({isNodeJs:()=>qe}),Ke=We();r(Ge,a(We()));const qe=Ke.isNode;function H(e=3){return Date.now()*10**e+Math.floor(Math.random()*10**e)}function U(e=6){return BigInt(H(e))}function W(e,t,n){return{id:n||H(),jsonrpc:`2.0`,method:e,params:t}}function Je(e,t){return{id:e,jsonrpc:`2.0`,result:t}}function G(e,t,n){return{id:e,jsonrpc:`2.0`,error:Ye(t,n)}}function Ye(e,t){return e===void 0?F(k):(typeof e==`string`&&(e=Object.assign(Object.assign({},F(A)),{message:e})),t!==void 0&&(e.data=t),P(e.code)&&(e=I(e.code)),e)}function Xe(e){return e.includes(`*`)?q(e):!/\W/g.test(e)}function K(e){return e===`*`}function q(e){return K(e)?!0:!(!e.includes(`*`)||e.split(`*`).length!==2||e.split(`*`).filter(e=>e.trim()===``).length!==1)}function Ze(e){return!K(e)&&q(e)&&!e.split(`*`)[0].trim()}function Qe(e){return!K(e)&&q(e)&&!e.split(`*`)[1].trim()}var J=class{},$e=class extends J{constructor(e){super()}},et=class extends J{constructor(){super()}},tt=class extends et{constructor(e){super()}},nt=`^https?:`,rt=`^wss?:`;function it(e){let t=e.match(new RegExp(/^\w+:/,`gi`));if(!(!t||!t.length))return t[0]}function at(e,t){let n=it(e);return n===void 0?!1:new RegExp(t).test(n)}function Y(e){return at(e,nt)}function ot(e){return at(e,rt)}function st(e){return RegExp(`wss?://localhost(:d{2,5})?`).test(e)}function X(e){return typeof e==`object`&&`id`in e&&`jsonrpc`in e&&e.jsonrpc===`2.0`}function ct(e){return X(e)&&`method`in e}function Z(e){return X(e)&&(Q(e)||$(e))}function Q(e){return`result`in e}function $(e){return`error`in e}function lt(e){return`error`in e&&e.valid===!1}var ut=e({DEFAULT_ERROR:()=>N,IBaseJsonRpcProvider:()=>et,IEvents:()=>J,IJsonRpcConnection:()=>$e,IJsonRpcProvider:()=>tt,INTERNAL_ERROR:()=>k,INVALID_PARAMS:()=>he,INVALID_REQUEST:()=>pe,METHOD_NOT_FOUND:()=>me,PARSE_ERROR:()=>O,RESERVED_ERROR_CODES:()=>ge,SERVER_ERROR:()=>A,SERVER_ERROR_CODE_RANGE:()=>j,STANDARD_ERROR_MAP:()=>M,formatErrorMessage:()=>Ye,formatJsonRpcError:()=>G,formatJsonRpcRequest:()=>W,formatJsonRpcResult:()=>Je,getBigIntRpcId:()=>U,getError:()=>F,getErrorByCode:()=>I,isHttpUrl:()=>Y,isJsonRpcError:()=>$,isJsonRpcPayload:()=>X,isJsonRpcRequest:()=>ct,isJsonRpcResponse:()=>Z,isJsonRpcResult:()=>Q,isJsonRpcValidationInvalid:()=>lt,isLocalhostUrl:()=>st,isNodeJs:()=>qe,isReservedErrorCode:()=>P,isServerErrorCode:()=>_e,isValidDefaultRoute:()=>K,isValidErrorCode:()=>ve,isValidLeadingWildcardRoute:()=>Ze,isValidRoute:()=>Xe,isValidTrailingWildcardRoute:()=>Qe,isValidWildcardRoute:()=>q,isWsUrl:()=>ot,parseConnectionError:()=>L,payloadId:()=>H,validateJsonRpcError:()=>ye});r(ut,Ge);var dt=o(),ft=class extends tt{constructor(e){super(e),this.events=new dt.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(W(e.method,e.params||[],e.id||U().toString()),t)}async requestStrict(e,t){return new Promise(async(n,r)=>{if(!this.connection.connected)try{await this.open()}catch(e){r(e)}this.events.on(`${e.id}`,e=>{$(e)?r(e.error):n(e.result)});try{await this.connection.send(e,t)}catch(e){r(e)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit(`payload`,e),Z(e)?this.events.emit(`${e.id}`,e):this.events.emit(`message`,{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit(`error`,Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:``}`)),this.events.emit(`disconnect`)}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e==`string`&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit(`connect`))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||=(this.connection.on(`payload`,e=>this.onPayload(e)),this.connection.on(`close`,e=>this.onClose(e)),this.connection.on(`error`,e=>this.events.emit(`error`,e)),this.connection.on(`register_error`,e=>this.onClose()),!0)}},pt=n(((e,t)=>{var n=typeof globalThis<`u`&&globalThis||typeof self<`u`&&self||typeof global<`u`&&global,r=(function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e})();(function(e){(function(t){var n=e!==void 0&&e||typeof self<`u`&&self||typeof global<`u`&&global||{},r={searchParams:`URLSearchParams`in n,iterable:`Symbol`in n&&`iterator`in Symbol,blob:`FileReader`in n&&`Blob`in n&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:`FormData`in n,arrayBuffer:`ArrayBuffer`in n};function i(e){return e&&DataView.prototype.isPrototypeOf(e)}if(r.arrayBuffer)var a=[`[object Int8Array]`,`[object Uint8Array]`,`[object Uint8ClampedArray]`,`[object Int16Array]`,`[object Uint16Array]`,`[object Int32Array]`,`[object Uint32Array]`,`[object Float32Array]`,`[object Float64Array]`],o=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function s(e){if(typeof e!=`string`&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||e===``)throw TypeError(`Invalid character in header field name: "`+e+`"`);return e.toLowerCase()}function c(e){return typeof e!=`string`&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:t===void 0,value:t}}};return r.iterable&&(t[Symbol.iterator]=function(){return t}),t}function u(e){this.map={},e instanceof u?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(e.length!=2)throw TypeError(`Headers constructor: expected name/value pair to be length 2, found`+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}u.prototype.append=function(e,t){e=s(e),t=c(t);var n=this.map[e];this.map[e]=n?n+`, `+t:t},u.prototype.delete=function(e){delete this.map[s(e)]},u.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},u.prototype.set=function(e,t){this.map[s(e)]=c(t)},u.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},u.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),l(e)},u.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),l(e)},u.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),l(e)},r.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);function d(e){if(!e._noBody){if(e.bodyUsed)return Promise.reject(TypeError(`Already read`));e.bodyUsed=!0}}function f(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function p(e){var t=new FileReader,n=f(t);return t.readAsArrayBuffer(e),n}function m(e){var t=new FileReader,n=f(t),r=/charset=([A-Za-z0-9_-]+)/.exec(e.type),i=r?r[1]:`utf-8`;return t.readAsText(e,i),n}function h(e){for(var t=new Uint8Array(e),n=Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join(``)}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?typeof e==`string`?this._bodyText=e:r.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:r.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():r.arrayBuffer&&r.blob&&i(e)?(this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=g(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=``),this.headers.get(`content-type`)||(typeof e==`string`?this.headers.set(`content-type`,`text/plain;charset=UTF-8`):this._bodyBlob&&this._bodyBlob.type?this.headers.set(`content-type`,this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set(`content-type`,`application/x-www-form-urlencoded;charset=UTF-8`))},r.blob&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw Error(`could not read FormData body as blob`);return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return d(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(r.blob)return this.blob().then(p);throw Error(`could not read as ArrayBuffer`)},this.text=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return m(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(h(this._bodyArrayBuffer));if(this._bodyFormData)throw Error(`could not read FormData body as text`);return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}var v=[`CONNECT`,`DELETE`,`GET`,`HEAD`,`OPTIONS`,`PATCH`,`POST`,`PUT`,`TRACE`];function y(e){var t=e.toUpperCase();return v.indexOf(t)>-1?t:e}function b(e,t){if(!(this instanceof b))throw TypeError(`Please use the "new" operator, this DOM object constructor cannot be called as a function.`);t||={};var r=t.body;if(e instanceof b){if(e.bodyUsed)throw TypeError(`Already read`);this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,!r&&e._bodyInit!=null&&(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||`same-origin`,(t.headers||!this.headers)&&(this.headers=new u(t.headers)),this.method=y(t.method||this.method||`GET`),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if(`AbortController`in n)return new AbortController().signal}(),this.referrer=null,(this.method===`GET`||this.method===`HEAD`)&&r)throw TypeError(`Body not allowed for GET or HEAD requests`);if(this._initBody(r),(this.method===`GET`||this.method===`HEAD`)&&(t.cache===`no-store`||t.cache===`no-cache`)){var i=/([?&])_=[^&]*/;i.test(this.url)?this.url=this.url.replace(i,`$1_=`+new Date().getTime()):this.url+=(/\?/.test(this.url)?`&`:`?`)+`_=`+new Date().getTime()}}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})};function x(e){var t=new FormData;return e.trim().split(`&`).forEach(function(e){if(e){var n=e.split(`=`),r=n.shift().replace(/\+/g,` `),i=n.join(`=`).replace(/\+/g,` `);t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function S(e){var t=new u;return e.replace(/\r?\n[\t ]+/g,` `).split(`\r`).map(function(e){return e.indexOf(`
`)===0?e.substr(1,e.length):e}).forEach(function(e){var n=e.split(`:`),r=n.shift().trim();if(r){var i=n.join(`:`).trim();try{t.append(r,i)}catch(e){console.warn(`Response `+e.message)}}}),t}_.call(b.prototype);function C(e,t){if(!(this instanceof C))throw TypeError(`Please use the "new" operator, this DOM object constructor cannot be called as a function.`);if(t||={},this.type=`default`,this.status=t.status===void 0?200:t.status,this.status<200||this.status>599)throw RangeError(`Failed to construct 'Response': The status provided (0) is outside the range [200, 599].`);this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText===void 0?``:``+t.statusText,this.headers=new u(t.headers),this.url=t.url||``,this._initBody(e)}_.call(C.prototype),C.prototype.clone=function(){return new C(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},C.error=function(){var e=new C(null,{status:200,statusText:``});return e.ok=!1,e.status=0,e.type=`error`,e};var w=[301,302,303,307,308];C.redirect=function(e,t){if(w.indexOf(t)===-1)throw RangeError(`Invalid status code`);return new C(null,{status:t,headers:{location:e}})},t.DOMException=n.DOMException;try{new t.DOMException}catch{t.DOMException=function(e,t){this.message=e,this.name=t,this.stack=Error(e).stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function T(e,i){return new Promise(function(a,o){var l=new b(e,i);if(l.signal&&l.signal.aborted)return o(new t.DOMException(`Aborted`,`AbortError`));var d=new XMLHttpRequest;function f(){d.abort()}d.onload=function(){var e={statusText:d.statusText,headers:S(d.getAllResponseHeaders()||``)};l.url.indexOf(`file://`)===0&&(d.status<200||d.status>599)?e.status=200:e.status=d.status,e.url=`responseURL`in d?d.responseURL:e.headers.get(`X-Request-URL`);var t=`response`in d?d.response:d.responseText;setTimeout(function(){a(new C(t,e))},0)},d.onerror=function(){setTimeout(function(){o(TypeError(`Network request failed`))},0)},d.ontimeout=function(){setTimeout(function(){o(TypeError(`Network request timed out`))},0)},d.onabort=function(){setTimeout(function(){o(new t.DOMException(`Aborted`,`AbortError`))},0)};function p(e){try{return e===``&&n.location.href?n.location.href:e}catch{return e}}if(d.open(l.method,p(l.url),!0),l.credentials===`include`?d.withCredentials=!0:l.credentials===`omit`&&(d.withCredentials=!1),`responseType`in d&&(r.blob?d.responseType=`blob`:r.arrayBuffer&&(d.responseType=`arraybuffer`)),i&&typeof i.headers==`object`&&!(i.headers instanceof u||n.Headers&&i.headers instanceof n.Headers)){var m=[];Object.getOwnPropertyNames(i.headers).forEach(function(e){m.push(s(e)),d.setRequestHeader(e,c(i.headers[e]))}),l.headers.forEach(function(e,t){m.indexOf(t)===-1&&d.setRequestHeader(t,e)})}else l.headers.forEach(function(e,t){d.setRequestHeader(t,e)});l.signal&&(l.signal.addEventListener(`abort`,f),d.onreadystatechange=function(){d.readyState===4&&l.signal.removeEventListener(`abort`,f)}),d.send(l._bodyInit===void 0?null:l._bodyInit)})}return T.polyfill=!0,n.fetch||(n.fetch=T,n.Headers=u,n.Request=b,n.Response=C),t.Headers=u,t.Request=b,t.Response=C,t.fetch=T,Object.defineProperty(t,`__esModule`,{value:!0}),t})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})),mt=o(),ht=a(pt()),gt=Object.defineProperty,_t=Object.defineProperties,vt=Object.getOwnPropertyDescriptors,yt=Object.getOwnPropertySymbols,bt=Object.prototype.hasOwnProperty,xt=Object.prototype.propertyIsEnumerable,St=(e,t,n)=>t in e?gt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ct=(e,t)=>{for(var n in t||={})bt.call(t,n)&&St(e,n,t[n]);if(yt)for(var n of yt(t))xt.call(t,n)&&St(e,n,t[n]);return e},wt=(e,t)=>_t(e,vt(t)),Tt={headers:{Accept:`application/json`,"Content-Type":`application/json`},method:`POST`},Et=10,Dt=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new mt.EventEmitter,this.isAvailable=!1,this.registering=!1,!Y(e))throw Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw Error(`Connection already closed`);this.onClose()}async send(e){this.isAvailable||await this.register();try{let t=u(e),n=await(await(0,ht.default)(this.url,wt(Ct({},Tt),{body:t}))).json();this.onPayload({data:n})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!Y(e))throw Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){let e=this.events.getMaxListeners();return(this.events.listenerCount(`register_error`)>=e||this.events.listenerCount(`open`)>=e)&&this.events.setMaxListeners(e+1),new Promise((e,t)=>{this.events.once(`register_error`,e=>{this.resetMaxListeners(),t(e)}),this.events.once(`open`,()=>{if(this.resetMaxListeners(),typeof this.isAvailable>`u`)return t(Error(`HTTP connection is missing or invalid`));e()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){let t=u({id:1,jsonrpc:`2.0`,method:`test`,params:[]});await(0,ht.default)(e,wt(Ct({},Tt),{body:t}))}this.onOpen()}catch(e){let t=this.parseError(e);throw this.events.emit(`register_error`,t),this.onClose(),t}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit(`open`)}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit(`close`)}onPayload(e){if(typeof e.data>`u`)return;let t=typeof e.data==`string`?l(e.data):e.data;this.events.emit(`payload`,t)}onError(e,t){let n=this.parseError(t),r=G(e,n.message||n.toString());this.events.emit(`payload`,r)}parseError(e,t=this.url){return L(e,t,`HTTP`)}resetMaxListeners(){this.events.getMaxListeners()>Et&&this.events.setMaxListeners(Et)}};export{u as S,le as _,ct as a,se as b,st as c,W as d,Je as f,fe as g,L as h,$ as i,ot as l,H as m,ft as n,Z as o,U as p,ut as r,Q as s,Dt as t,G as u,m as v,l as x,ie as y};